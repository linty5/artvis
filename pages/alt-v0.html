<!DOCTYPE html>
<html>
<head>
  <style>
    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "param_1_store"}, {"name": "source_0", "values": [{"city": "-", "country": "DE", "num_exhibitions": 633, "total_paintings": 1148, "unique_venues": 1}, {"city": "-", "country": "Unknown Country", "num_exhibitions": 5, "total_paintings": 56, "unique_venues": 1}, {"city": "Amsterdam", "country": "NL", "num_exhibitions": 4610, "total_paintings": 11021, "unique_venues": 10}, {"city": "Antwerp", "country": "BE", "num_exhibitions": 9, "total_paintings": 43, "unique_venues": 1}, {"city": "Arnhem", "country": "NL", "num_exhibitions": 295, "total_paintings": 387, "unique_venues": 1}, {"city": "Barcelona", "country": "ES", "num_exhibitions": 8, "total_paintings": 38, "unique_venues": 1}, {"city": "Basel", "country": "CH", "num_exhibitions": 192, "total_paintings": 664, "unique_venues": 2}, {"city": "Berlin", "country": "DE", "num_exhibitions": 5416, "total_paintings": 22630, "unique_venues": 18}, {"city": "Boston", "country": "US", "num_exhibitions": 55, "total_paintings": 220, "unique_venues": 1}, {"city": "Brandenburg an der Havel", "country": "DE", "num_exhibitions": 8, "total_paintings": 43, "unique_venues": 1}, {"city": "Bremen", "country": "DE", "num_exhibitions": 793, "total_paintings": 1940, "unique_venues": 1}, {"city": "Breslau", "country": "PL", "num_exhibitions": 2, "total_paintings": 58, "unique_venues": 2}, {"city": "Brighton", "country": "GB", "num_exhibitions": 239, "total_paintings": 609, "unique_venues": 1}, {"city": "Brussels", "country": "BE", "num_exhibitions": 2156, "total_paintings": 8777, "unique_venues": 10}, {"city": "Budapest", "country": "HU", "num_exhibitions": 3226, "total_paintings": 15126, "unique_venues": 7}, {"city": "Chemnitz", "country": "DE", "num_exhibitions": 1, "total_paintings": 22, "unique_venues": 1}, {"city": "Chicago", "country": "US", "num_exhibitions": 157, "total_paintings": 404, "unique_venues": 2}, {"city": "Christiania", "country": "NO", "num_exhibitions": 4, "total_paintings": 360, "unique_venues": 2}, {"city": "Christiania", "country": "Unknown Country", "num_exhibitions": 1, "total_paintings": 62, "unique_venues": 1}, {"city": "Chrudim", "country": "CZ", "num_exhibitions": 20, "total_paintings": 87, "unique_venues": 1}, {"city": "Cincinnati", "country": "US", "num_exhibitions": 21, "total_paintings": 34, "unique_venues": 1}, {"city": "Cologne", "country": "DE", "num_exhibitions": 1273, "total_paintings": 3984, "unique_venues": 7}, {"city": "Cracow", "country": "PL", "num_exhibitions": 37, "total_paintings": 315, "unique_venues": 1}, {"city": "Darmstadt", "country": "DE", "num_exhibitions": 190, "total_paintings": 311, "unique_venues": 1}, {"city": "Domburg", "country": "NL", "num_exhibitions": 34, "total_paintings": 161, "unique_venues": 1}, {"city": "Dresden", "country": "DE", "num_exhibitions": 180, "total_paintings": 536, "unique_venues": 2}, {"city": "Dresden", "country": "US", "num_exhibitions": 2, "total_paintings": 40, "unique_venues": 2}, {"city": "Dusseldorf", "country": "DE", "num_exhibitions": 909, "total_paintings": 2117, "unique_venues": 3}, {"city": "Ekaterinodar", "country": "RU", "num_exhibitions": 28, "total_paintings": 79, "unique_venues": 1}, {"city": "Essen", "country": "DE", "num_exhibitions": 86, "total_paintings": 127, "unique_venues": 1}, {"city": "Florence", "country": "IT", "num_exhibitions": 98, "total_paintings": 745, "unique_venues": 2}, {"city": "Frankfurt am Main", "country": "DE", "num_exhibitions": 78, "total_paintings": 456, "unique_venues": 2}, {"city": "Ghent", "country": "BE", "num_exhibitions": 668, "total_paintings": 1176, "unique_venues": 1}, {"city": "Glasgow", "country": "GB", "num_exhibitions": 21, "total_paintings": 76, "unique_venues": 1}, {"city": "Gothenburg", "country": "SE", "num_exhibitions": 375, "total_paintings": 813, "unique_venues": 3}, {"city": "Hagen", "country": "DE", "num_exhibitions": 1, "total_paintings": 30, "unique_venues": 1}, {"city": "Hamburg", "country": "DE", "num_exhibitions": 95, "total_paintings": 464, "unique_venues": 4}, {"city": "Hodon\u00edn", "country": "CZ", "num_exhibitions": 280, "total_paintings": 1111, "unique_venues": 3}, {"city": "Jena", "country": "DE", "num_exhibitions": 1, "total_paintings": 4, "unique_venues": 1}, {"city": "Kiev", "country": "UA", "num_exhibitions": 101, "total_paintings": 681, "unique_venues": 2}, {"city": "Kladno", "country": "CZ", "num_exhibitions": 50, "total_paintings": 150, "unique_venues": 2}, {"city": "Krefeld", "country": "DE", "num_exhibitions": 1, "total_paintings": 1, "unique_venues": 1}, {"city": "Krom\u011b\u0159\u00ed\u017e", "country": "CZ", "num_exhibitions": 27, "total_paintings": 100, "unique_venues": 1}, {"city": "Leipzig", "country": "DE", "num_exhibitions": 535, "total_paintings": 847, "unique_venues": 3}, {"city": "Liverpool", "country": "GB", "num_exhibitions": 49, "total_paintings": 157, "unique_venues": 1}, {"city": "London", "country": "GB", "num_exhibitions": 6308, "total_paintings": 20284, "unique_venues": 18}, {"city": "Luzern", "country": "CH", "num_exhibitions": 14, "total_paintings": 59, "unique_venues": 1}, {"city": "Magdeburg", "country": "DE", "num_exhibitions": 1, "total_paintings": 5, "unique_venues": 1}, {"city": "Mannheim", "country": "DE", "num_exhibitions": 479, "total_paintings": 962, "unique_venues": 2}, {"city": "Milan", "country": "IT", "num_exhibitions": 791, "total_paintings": 2224, "unique_venues": 2}, {"city": "Moscow", "country": "RU", "num_exhibitions": 1202, "total_paintings": 8303, "unique_venues": 11}, {"city": "Munich", "country": "DE", "num_exhibitions": 8073, "total_paintings": 19355, "unique_venues": 12}, {"city": "Naples", "country": "IT", "num_exhibitions": 6, "total_paintings": 87, "unique_venues": 1}, {"city": "New York", "country": "US", "num_exhibitions": 799, "total_paintings": 3199, "unique_venues": 12}, {"city": "Nijmegen", "country": "NL", "num_exhibitions": 44, "total_paintings": 122, "unique_venues": 1}, {"city": "Odessa", "country": "UA", "num_exhibitions": 55, "total_paintings": 419, "unique_venues": 1}, {"city": "Olomouc", "country": "CZ", "num_exhibitions": 36, "total_paintings": 144, "unique_venues": 1}, {"city": "Ostend", "country": "BE", "num_exhibitions": 96, "total_paintings": 364, "unique_venues": 2}, {"city": "Paris", "country": "FR", "num_exhibitions": 4578, "total_paintings": 21806, "unique_venues": 38}, {"city": "Pittsburgh", "country": "US", "num_exhibitions": 1229, "total_paintings": 1656, "unique_venues": 1}, {"city": "Prague", "country": "CZ", "num_exhibitions": 1781, "total_paintings": 9472, "unique_venues": 14}, {"city": "Prost\u011bjov", "country": "CZ", "num_exhibitions": 2, "total_paintings": 194, "unique_venues": 2}, {"city": "Riga", "country": "LV", "num_exhibitions": 30, "total_paintings": 213, "unique_venues": 1}, {"city": "Rome", "country": "IT", "num_exhibitions": 798, "total_paintings": 2012, "unique_venues": 4}, {"city": "Rotterdam", "country": "NL", "num_exhibitions": 11, "total_paintings": 381, "unique_venues": 2}, {"city": "Rouen", "country": "FR", "num_exhibitions": 93, "total_paintings": 346, "unique_venues": 2}, {"city": "Saint Petersburg", "country": "RU", "num_exhibitions": 1001, "total_paintings": 6895, "unique_venues": 12}, {"city": "San Francisco", "country": "US", "num_exhibitions": 1, "total_paintings": 1, "unique_venues": 1}, {"city": "Stockholm", "country": "SE", "num_exhibitions": 95, "total_paintings": 619, "unique_venues": 5}, {"city": "Strasbourg", "country": "FR", "num_exhibitions": 194, "total_paintings": 504, "unique_venues": 2}, {"city": "Stuttgart", "country": "DE", "num_exhibitions": 196, "total_paintings": 456, "unique_venues": 2}, {"city": "Tokyo", "country": "JP", "num_exhibitions": 25, "total_paintings": 69, "unique_venues": 1}, {"city": "Toulouse", "country": "FR", "num_exhibitions": 356, "total_paintings": 2337, "unique_venues": 4}, {"city": "Unknown City", "country": "GB", "num_exhibitions": 237, "total_paintings": 494, "unique_venues": 2}, {"city": "Utrecht", "country": "NL", "num_exhibitions": 2, "total_paintings": 118, "unique_venues": 2}, {"city": "Vala\u0161sk\u00e9 Mezi\u0159\u00ed\u010d\u00ed", "country": "CZ", "num_exhibitions": 28, "total_paintings": 127, "unique_venues": 1}, {"city": "Venice", "country": "IT", "num_exhibitions": 5040, "total_paintings": 14982, "unique_venues": 2}, {"city": "Vienna", "country": "AT", "num_exhibitions": 4592, "total_paintings": 21002, "unique_venues": 13}, {"city": "Vilnius", "country": "LT", "num_exhibitions": 17, "total_paintings": 153, "unique_venues": 1}, {"city": "Weggis", "country": "CH", "num_exhibitions": 41, "total_paintings": 204, "unique_venues": 1}, {"city": "Weimar", "country": "DE", "num_exhibitions": 153, "total_paintings": 309, "unique_venues": 2}, {"city": "Zurich", "country": "CH", "num_exhibitions": 232, "total_paintings": 912, "unique_venues": 3}]}, {"name": "data_0", "values": [{"city": "-", "country": "DE", "num_exhibitions": 633, "total_paintings": 1148, "unique_venues": 1}, {"city": "-", "country": "Unknown Country", "num_exhibitions": 5, "total_paintings": 56, "unique_venues": 1}, {"city": "Amsterdam", "country": "NL", "num_exhibitions": 4610, "total_paintings": 11021, "unique_venues": 10}, {"city": "Antwerp", "country": "BE", "num_exhibitions": 9, "total_paintings": 43, "unique_venues": 1}, {"city": "Arnhem", "country": "NL", "num_exhibitions": 295, "total_paintings": 387, "unique_venues": 1}, {"city": "Barcelona", "country": "ES", "num_exhibitions": 8, "total_paintings": 38, "unique_venues": 1}, {"city": "Basel", "country": "CH", "num_exhibitions": 192, "total_paintings": 664, "unique_venues": 2}, {"city": "Berlin", "country": "DE", "num_exhibitions": 5416, "total_paintings": 22630, "unique_venues": 18}, {"city": "Boston", "country": "US", "num_exhibitions": 55, "total_paintings": 220, "unique_venues": 1}, {"city": "Brandenburg an der Havel", "country": "DE", "num_exhibitions": 8, "total_paintings": 43, "unique_venues": 1}, {"city": "Bremen", "country": "DE", "num_exhibitions": 793, "total_paintings": 1940, "unique_venues": 1}, {"city": "Breslau", "country": "PL", "num_exhibitions": 2, "total_paintings": 58, "unique_venues": 2}, {"city": "Brighton", "country": "GB", "num_exhibitions": 239, "total_paintings": 609, "unique_venues": 1}, {"city": "Brussels", "country": "BE", "num_exhibitions": 2156, "total_paintings": 8777, "unique_venues": 10}, {"city": "Budapest", "country": "HU", "num_exhibitions": 3226, "total_paintings": 15126, "unique_venues": 7}, {"city": "Chemnitz", "country": "DE", "num_exhibitions": 1, "total_paintings": 22, "unique_venues": 1}, {"city": "Chicago", "country": "US", "num_exhibitions": 157, "total_paintings": 404, "unique_venues": 2}, {"city": "Christiania", "country": "NO", "num_exhibitions": 4, "total_paintings": 360, "unique_venues": 2}, {"city": "Christiania", "country": "Unknown Country", "num_exhibitions": 1, "total_paintings": 62, "unique_venues": 1}, {"city": "Chrudim", "country": "CZ", "num_exhibitions": 20, "total_paintings": 87, "unique_venues": 1}, {"city": "Cincinnati", "country": "US", "num_exhibitions": 21, "total_paintings": 34, "unique_venues": 1}, {"city": "Cologne", "country": "DE", "num_exhibitions": 1273, "total_paintings": 3984, "unique_venues": 7}, {"city": "Cracow", "country": "PL", "num_exhibitions": 37, "total_paintings": 315, "unique_venues": 1}, {"city": "Darmstadt", "country": "DE", "num_exhibitions": 190, "total_paintings": 311, "unique_venues": 1}, {"city": "Domburg", "country": "NL", "num_exhibitions": 34, "total_paintings": 161, "unique_venues": 1}, {"city": "Dresden", "country": "DE", "num_exhibitions": 180, "total_paintings": 536, "unique_venues": 2}, {"city": "Dresden", "country": "US", "num_exhibitions": 2, "total_paintings": 40, "unique_venues": 2}, {"city": "Dusseldorf", "country": "DE", "num_exhibitions": 909, "total_paintings": 2117, "unique_venues": 3}, {"city": "Ekaterinodar", "country": "RU", "num_exhibitions": 28, "total_paintings": 79, "unique_venues": 1}, {"city": "Essen", "country": "DE", "num_exhibitions": 86, "total_paintings": 127, "unique_venues": 1}, {"city": "Florence", "country": "IT", "num_exhibitions": 98, "total_paintings": 745, "unique_venues": 2}, {"city": "Frankfurt am Main", "country": "DE", "num_exhibitions": 78, "total_paintings": 456, "unique_venues": 2}, {"city": "Ghent", "country": "BE", "num_exhibitions": 668, "total_paintings": 1176, "unique_venues": 1}, {"city": "Glasgow", "country": "GB", "num_exhibitions": 21, "total_paintings": 76, "unique_venues": 1}, {"city": "Gothenburg", "country": "SE", "num_exhibitions": 375, "total_paintings": 813, "unique_venues": 3}, {"city": "Hagen", "country": "DE", "num_exhibitions": 1, "total_paintings": 30, "unique_venues": 1}, {"city": "Hamburg", "country": "DE", "num_exhibitions": 95, "total_paintings": 464, "unique_venues": 4}, {"city": "Hodon\u00edn", "country": "CZ", "num_exhibitions": 280, "total_paintings": 1111, "unique_venues": 3}, {"city": "Jena", "country": "DE", "num_exhibitions": 1, "total_paintings": 4, "unique_venues": 1}, {"city": "Kiev", "country": "UA", "num_exhibitions": 101, "total_paintings": 681, "unique_venues": 2}, {"city": "Kladno", "country": "CZ", "num_exhibitions": 50, "total_paintings": 150, "unique_venues": 2}, {"city": "Krefeld", "country": "DE", "num_exhibitions": 1, "total_paintings": 1, "unique_venues": 1}, {"city": "Krom\u011b\u0159\u00ed\u017e", "country": "CZ", "num_exhibitions": 27, "total_paintings": 100, "unique_venues": 1}, {"city": "Leipzig", "country": "DE", "num_exhibitions": 535, "total_paintings": 847, "unique_venues": 3}, {"city": "Liverpool", "country": "GB", "num_exhibitions": 49, "total_paintings": 157, "unique_venues": 1}, {"city": "London", "country": "GB", "num_exhibitions": 6308, "total_paintings": 20284, "unique_venues": 18}, {"city": "Luzern", "country": "CH", "num_exhibitions": 14, "total_paintings": 59, "unique_venues": 1}, {"city": "Magdeburg", "country": "DE", "num_exhibitions": 1, "total_paintings": 5, "unique_venues": 1}, {"city": "Mannheim", "country": "DE", "num_exhibitions": 479, "total_paintings": 962, "unique_venues": 2}, {"city": "Milan", "country": "IT", "num_exhibitions": 791, "total_paintings": 2224, "unique_venues": 2}, {"city": "Moscow", "country": "RU", "num_exhibitions": 1202, "total_paintings": 8303, "unique_venues": 11}, {"city": "Munich", "country": "DE", "num_exhibitions": 8073, "total_paintings": 19355, "unique_venues": 12}, {"city": "Naples", "country": "IT", "num_exhibitions": 6, "total_paintings": 87, "unique_venues": 1}, {"city": "New York", "country": "US", "num_exhibitions": 799, "total_paintings": 3199, "unique_venues": 12}, {"city": "Nijmegen", "country": "NL", "num_exhibitions": 44, "total_paintings": 122, "unique_venues": 1}, {"city": "Odessa", "country": "UA", "num_exhibitions": 55, "total_paintings": 419, "unique_venues": 1}, {"city": "Olomouc", "country": "CZ", "num_exhibitions": 36, "total_paintings": 144, "unique_venues": 1}, {"city": "Ostend", "country": "BE", "num_exhibitions": 96, "total_paintings": 364, "unique_venues": 2}, {"city": "Paris", "country": "FR", "num_exhibitions": 4578, "total_paintings": 21806, "unique_venues": 38}, {"city": "Pittsburgh", "country": "US", "num_exhibitions": 1229, "total_paintings": 1656, "unique_venues": 1}, {"city": "Prague", "country": "CZ", "num_exhibitions": 1781, "total_paintings": 9472, "unique_venues": 14}, {"city": "Prost\u011bjov", "country": "CZ", "num_exhibitions": 2, "total_paintings": 194, "unique_venues": 2}, {"city": "Riga", "country": "LV", "num_exhibitions": 30, "total_paintings": 213, "unique_venues": 1}, {"city": "Rome", "country": "IT", "num_exhibitions": 798, "total_paintings": 2012, "unique_venues": 4}, {"city": "Rotterdam", "country": "NL", "num_exhibitions": 11, "total_paintings": 381, "unique_venues": 2}, {"city": "Rouen", "country": "FR", "num_exhibitions": 93, "total_paintings": 346, "unique_venues": 2}, {"city": "Saint Petersburg", "country": "RU", "num_exhibitions": 1001, "total_paintings": 6895, "unique_venues": 12}, {"city": "San Francisco", "country": "US", "num_exhibitions": 1, "total_paintings": 1, "unique_venues": 1}, {"city": "Stockholm", "country": "SE", "num_exhibitions": 95, "total_paintings": 619, "unique_venues": 5}, {"city": "Strasbourg", "country": "FR", "num_exhibitions": 194, "total_paintings": 504, "unique_venues": 2}, {"city": "Stuttgart", "country": "DE", "num_exhibitions": 196, "total_paintings": 456, "unique_venues": 2}, {"city": "Tokyo", "country": "JP", "num_exhibitions": 25, "total_paintings": 69, "unique_venues": 1}, {"city": "Toulouse", "country": "FR", "num_exhibitions": 356, "total_paintings": 2337, "unique_venues": 4}, {"city": "Unknown City", "country": "GB", "num_exhibitions": 237, "total_paintings": 494, "unique_venues": 2}, {"city": "Utrecht", "country": "NL", "num_exhibitions": 2, "total_paintings": 118, "unique_venues": 2}, {"city": "Vala\u0161sk\u00e9 Mezi\u0159\u00ed\u010d\u00ed", "country": "CZ", "num_exhibitions": 28, "total_paintings": 127, "unique_venues": 1}, {"city": "Venice", "country": "IT", "num_exhibitions": 5040, "total_paintings": 14982, "unique_venues": 2}, {"city": "Vienna", "country": "AT", "num_exhibitions": 4592, "total_paintings": 21002, "unique_venues": 13}, {"city": "Vilnius", "country": "LT", "num_exhibitions": 17, "total_paintings": 153, "unique_venues": 1}, {"city": "Weggis", "country": "CH", "num_exhibitions": 41, "total_paintings": 204, "unique_venues": 1}, {"city": "Weimar", "country": "DE", "num_exhibitions": 153, "total_paintings": 309, "unique_venues": 2}, {"city": "Zurich", "country": "CH", "num_exhibitions": 232, "total_paintings": 912, "unique_venues": 3}]}, {"name": "data_1", "source": "source_0", "transform": [{"type": "filter", "expr": "!length(data(\"param_1_store\")) || vlSelectionTest(\"param_1_store\", datum)"}, {"type": "project", "fields": ["country", "num_exhibitions", "total_paintings"]}]}, {"name": "data_2", "source": "data_1", "transform": [{"type": "aggregate", "groupby": ["country"], "fields": ["num_exhibitions", "total_paintings"], "ops": ["sum", "sum"], "as": ["sum_num_exhibitions", "sum_total_paintings"]}, {"type": "filter", "expr": "isValid(datum[\"sum_num_exhibitions\"]) && isFinite(+datum[\"sum_num_exhibitions\"])"}, {"type": "project", "fields": ["country", "num_exhibitions", "sum_num_exhibitions", "sum_total_paintings", "total_paintings"]}]}, {"name": "data_0_color_domain_country_0", "values": [{"country": "DE"}, {"country": "Unknown Country"}, {"country": "NL"}, {"country": "BE"}, {"country": "ES"}, {"country": "CH"}, {"country": "US"}, {"country": "PL"}, {"country": "GB"}, {"country": "HU"}, {"country": "NO"}, {"country": "CZ"}, {"country": "RU"}, {"country": "IT"}, {"country": "SE"}, {"country": "UA"}, {"country": "FR"}, {"country": "LV"}, {"country": "JP"}, {"country": "AT"}, {"country": "LT"}]}, {"name": "data_2_color_domain_country_1", "source": "data_2", "transform": [{"type": "aggregate", "groupby": ["country"], "fields": [], "ops": [], "as": []}, {"type": "formula", "expr": "datum['country']", "as": "sort_field"}, {"type": "project", "fields": ["country"]}]}, {"name": "data_0_size_domain_unique_venues", "values": [{"min": 1, "max": 38}]}, {"name": "data_0_view_1_x_domain_num_exhibitions", "values": [{"min": 1, "max": 8073}]}, {"name": "data_0_view_1_y_domain_total_paintings", "values": [{"min": 1, "max": 22630}]}, {"name": "data_1_concat_1_x_domain_country", "source": "data_1", "transform": [{"type": "aggregate", "groupby": ["country"], "fields": ["num_exhibitions"], "ops": ["sum"], "as": ["sort_field"]}, {"type": "project", "fields": ["country", "sort_field"]}]}, {"name": "data_2_concat_1_y_domain_sum_num_exhibitions", "source": "data_2", "transform": [{"type": "formula", "expr": "+datum['sum_num_exhibitions']", "as": "sum_num_exhibitions"}, {"type": "aggregate", "groupby": [], "fields": ["sum_num_exhibitions", "sum_num_exhibitions"], "ops": ["min", "max"], "as": ["min", "max"]}]}], "signals": [{"name": "view_1_height", "value": 300}, {"name": "concat_1_height", "value": 150}, {"name": "unit", "value": {}, "on": [{"events": "pointermove", "update": "isTuple(group()) ? group() : unit"}]}, {"name": "param_1", "update": "vlSelectionResolve(\"param_1_store\", \"union\")"}], "marks": [{"type": "group", "name": "view_1_group", "encode": {"update": {"height": {"signal": "view_1_height"}, "width": {"signal": "width"}}}, "signals": [{"name": "param_1_x", "value": [], "on": [{"events": {"source": "scope", "filter": ["!event.item || event.item.mark.name !== \"param_1_brush\""], "type": "pointerdown"}, "update": "[x(unit), x(unit)]"}, {"events": {"source": "window", "between": [{"source": "scope", "filter": ["!event.item || event.item.mark.name !== \"param_1_brush\""], "type": "pointerdown"}, {"source": "window", "type": "pointerup"}], "consume": true, "type": "pointermove"}, "update": "[param_1_x[0], clamp(x(unit), 0, width)]"}, {"events": {"signal": "param_1_scale_trigger"}, "update": "[scale(\"view_1_x\", param_1_num_exhibitions[0]), scale(\"view_1_x\", param_1_num_exhibitions[1])]"}, {"events": [{"source": "view", "type": "dblclick"}], "update": "[0, 0]"}, {"events": {"signal": "param_1_translate_delta"}, "update": "clampRange(panLinear(param_1_translate_anchor.extent_x, param_1_translate_delta.x / span(param_1_translate_anchor.extent_x)), 0, width)"}, {"events": {"signal": "param_1_zoom_delta"}, "update": "clampRange(zoomLinear(param_1_x, param_1_zoom_anchor.x, param_1_zoom_delta), 0, width)"}]}, {"name": "param_1_num_exhibitions", "on": [{"events": {"signal": "param_1_x"}, "update": "param_1_x[0] === param_1_x[1] ? null : invert(\"view_1_x\", param_1_x)"}]}, {"name": "param_1_y", "value": [], "on": [{"events": {"source": "scope", "filter": ["!event.item || event.item.mark.name !== \"param_1_brush\""], "type": "pointerdown"}, "update": "[y(unit), y(unit)]"}, {"events": {"source": "window", "between": [{"source": "scope", "filter": ["!event.item || event.item.mark.name !== \"param_1_brush\""], "type": "pointerdown"}, {"source": "window", "type": "pointerup"}], "type": "pointermove", "consume": true}, "update": "[param_1_y[0], clamp(y(unit), 0, view_1_height)]"}, {"events": {"signal": "param_1_scale_trigger"}, "update": "[scale(\"view_1_y\", param_1_total_paintings[0]), scale(\"view_1_y\", param_1_total_paintings[1])]"}, {"events": [{"source": "view", "type": "dblclick"}], "update": "[0, 0]"}, {"events": {"signal": "param_1_translate_delta"}, "update": "clampRange(panLinear(param_1_translate_anchor.extent_y, param_1_translate_delta.y / span(param_1_translate_anchor.extent_y)), 0, view_1_height)"}, {"events": {"signal": "param_1_zoom_delta"}, "update": "clampRange(zoomLinear(param_1_y, param_1_zoom_anchor.y, param_1_zoom_delta), 0, view_1_height)"}]}, {"name": "param_1_total_paintings", "on": [{"events": {"signal": "param_1_y"}, "update": "param_1_y[0] === param_1_y[1] ? null : invert(\"view_1_y\", param_1_y)"}]}, {"name": "param_1_scale_trigger", "value": {}, "on": [{"events": [{"scale": "view_1_x"}, {"scale": "view_1_y"}], "update": "(!isArray(param_1_num_exhibitions) || (+invert(\"view_1_x\", param_1_x)[0] === +param_1_num_exhibitions[0] && +invert(\"view_1_x\", param_1_x)[1] === +param_1_num_exhibitions[1])) && (!isArray(param_1_total_paintings) || (+invert(\"view_1_y\", param_1_y)[0] === +param_1_total_paintings[0] && +invert(\"view_1_y\", param_1_y)[1] === +param_1_total_paintings[1])) ? param_1_scale_trigger : {}"}]}, {"name": "param_1_tuple", "on": [{"events": [{"signal": "param_1_num_exhibitions || param_1_total_paintings"}], "update": "param_1_num_exhibitions && param_1_total_paintings ? {unit: \"view_1\", fields: param_1_tuple_fields, values: [param_1_num_exhibitions,param_1_total_paintings]} : null"}]}, {"name": "param_1_tuple_fields", "value": [{"field": "num_exhibitions", "channel": "x", "type": "R"}, {"field": "total_paintings", "channel": "y", "type": "R"}]}, {"name": "param_1_translate_anchor", "value": {}, "on": [{"events": [{"source": "scope", "markname": "param_1_brush", "type": "pointerdown"}], "update": "{x: x(unit), y: y(unit), extent_x: slice(param_1_x), extent_y: slice(param_1_y)}"}]}, {"name": "param_1_translate_delta", "value": {}, "on": [{"events": [{"source": "window", "between": [{"source": "scope", "markname": "param_1_brush", "type": "pointerdown"}, {"source": "window", "type": "pointerup"}], "type": "pointermove", "consume": true}], "update": "{x: param_1_translate_anchor.x - x(unit), y: param_1_translate_anchor.y - y(unit)}"}]}, {"name": "param_1_zoom_anchor", "on": [{"events": [{"source": "scope", "markname": "param_1_brush", "type": "wheel", "consume": true}], "update": "{x: x(unit), y: y(unit)}"}]}, {"name": "param_1_zoom_delta", "on": [{"events": [{"source": "scope", "markname": "param_1_brush", "consume": true, "type": "wheel"}], "update": "pow(1.001, event.deltaY * pow(16, event.deltaMode))", "force": true}]}, {"name": "param_1_modify", "on": [{"events": {"signal": "param_1_tuple"}, "update": "modify(\"param_1_store\", param_1_tuple, true)"}]}], "marks": [{"type": "rect", "name": "param_1_brush_bg", "encode": {"enter": {"fillOpacity": {"value": 0.125}, "fill": {"value": "#333"}}, "update": {"y2": [{"signal": "param_1_y[1]", "test": "data(\"param_1_store\").length && data(\"param_1_store\")[0].unit === \"view_1\""}, {"value": 0}], "x2": [{"signal": "param_1_x[1]", "test": "data(\"param_1_store\").length && data(\"param_1_store\")[0].unit === \"view_1\""}, {"value": 0}], "x": [{"signal": "param_1_x[0]", "test": "data(\"param_1_store\").length && data(\"param_1_store\")[0].unit === \"view_1\""}, {"value": 0}], "y": [{"signal": "param_1_y[0]", "test": "data(\"param_1_store\").length && data(\"param_1_store\")[0].unit === \"view_1\""}, {"value": 0}]}}, "clip": true}, {"type": "symbol", "name": "view_1_marks", "from": {"data": "data_0"}, "encode": {"update": {"fill": [{"field": "country", "scale": "color", "test": "!length(data(\"param_1_store\")) || vlSelectionTest(\"param_1_store\", datum)"}, {"value": "lightgray"}], "opacity": {"value": 0.7}, "y": {"field": "total_paintings", "scale": "view_1_y"}, "size": {"field": "unique_venues", "scale": "size"}, "shape": {"value": "circle"}, "tooltip": {"signal": "{\"City\": isValid(datum[\"city\"]) ? datum[\"city\"] : \"\"+datum[\"city\"], \"Country\": isValid(datum[\"country\"]) ? datum[\"country\"] : \"\"+datum[\"country\"], \"Number of Exhibitions\": format(datum[\"num_exhibitions\"], \"\"), \"Total Paintings\": format(datum[\"total_paintings\"], \"\"), \"Number of Venues\": format(datum[\"unique_venues\"], \"\")}"}, "x": {"field": "num_exhibitions", "scale": "view_1_x"}}}, "style": ["circle"], "interactive": true}, {"type": "rect", "name": "param_1_brush", "encode": {"update": {"y": [{"signal": "param_1_y[0]", "test": "data(\"param_1_store\").length && data(\"param_1_store\")[0].unit === \"view_1\""}, {"value": 0}], "stroke": [{"value": "white", "test": "param_1_x[0] !== param_1_x[1] && param_1_y[0] !== param_1_y[1]"}, {}], "y2": [{"signal": "param_1_y[1]", "test": "data(\"param_1_store\").length && data(\"param_1_store\")[0].unit === \"view_1\""}, {"value": 0}], "x2": [{"signal": "param_1_x[1]", "test": "data(\"param_1_store\").length && data(\"param_1_store\")[0].unit === \"view_1\""}, {"value": 0}], "x": [{"signal": "param_1_x[0]", "test": "data(\"param_1_store\").length && data(\"param_1_store\")[0].unit === \"view_1\""}, {"value": 0}]}, "enter": {"fill": {"value": "transparent"}, "cursor": {"value": "move"}}}, "clip": true}], "axes": [{"scale": "view_1_x", "domain": false, "maxExtent": 0, "gridScale": "view_1_y", "grid": true, "tickCount": {"signal": "ceil(width/40)"}, "ticks": false, "aria": false, "minExtent": 0, "zindex": 0, "labels": false, "orient": "bottom"}, {"scale": "view_1_y", "grid": true, "zindex": 0, "tickCount": {"signal": "ceil(view_1_height/40)"}, "ticks": false, "gridScale": "view_1_x", "minExtent": 0, "aria": false, "maxExtent": 0, "labels": false, "orient": "left", "domain": false}, {"scale": "view_1_x", "labelFlush": true, "labelOverlap": true, "grid": false, "zindex": 0, "orient": "bottom", "title": "Number of Exhibitions", "tickCount": {"signal": "ceil(width/40)"}}, {"scale": "view_1_y", "tickCount": {"signal": "ceil(view_1_height/40)"}, "grid": false, "title": "Total Paintings", "labelOverlap": true, "orient": "left", "zindex": 0}], "style": "cell"}, {"type": "group", "name": "concat_1_group", "encode": {"update": {"height": {"signal": "concat_1_height"}, "width": {"signal": "width"}}}, "marks": [{"type": "rect", "name": "concat_1_marks", "from": {"data": "data_2"}, "encode": {"update": {"fill": [{"field": "country", "scale": "color", "test": "!length(data(\"param_1_store\")) || vlSelectionTest(\"param_1_store\", datum)"}, {"value": "lightgray"}], "y": {"field": "sum_num_exhibitions", "scale": "concat_1_y"}, "width": {"signal": "max(0.25, bandwidth('concat_1_x'))"}, "x": {"field": "country", "scale": "concat_1_x"}, "y2": {"value": 0, "scale": "concat_1_y"}, "tooltip": {"signal": "{\"Country\": isValid(datum[\"country\"]) ? datum[\"country\"] : \"\"+datum[\"country\"], \"Total Exhibitions\": format(datum[\"sum_num_exhibitions\"], \"\"), \"Total Paintings\": format(datum[\"sum_total_paintings\"], \"\")}"}}}, "style": ["bar"], "interactive": true}], "axes": [{"scale": "concat_1_y", "maxExtent": 0, "minExtent": 0, "ticks": false, "zindex": 0, "labels": false, "tickCount": {"signal": "ceil(concat_1_height/40)"}, "aria": false, "grid": true, "gridScale": "concat_1_x", "orient": "left", "domain": false}, {"scale": "concat_1_x", "orient": "bottom", "labelAngle": 270, "zindex": 0, "labelBaseline": "middle", "labelAlign": "right", "grid": false, "title": "Country"}, {"scale": "concat_1_y", "orient": "left", "tickCount": {"signal": "ceil(concat_1_height/40)"}, "zindex": 0, "labelOverlap": true, "grid": false, "title": "Total Exhibitions"}], "style": "cell"}], "scales": [{"name": "color", "type": "ordinal", "domain": {"fields": [{"data": "data_0_color_domain_country_0", "field": "country"}, {"data": "data_2_color_domain_country_1", "field": "country"}], "sort": true}, "range": {"scheme": "category20"}}, {"name": "size", "type": "linear", "domain": [{"signal": "(data(\"data_0_size_domain_unique_venues\")[0] || {}).min"}, {"signal": "(data(\"data_0_size_domain_unique_venues\")[0] || {}).max"}], "range": [100, 1000], "zero": true}, {"name": "view_1_x", "type": "linear", "domain": [{"signal": "(data(\"data_0_view_1_x_domain_num_exhibitions\")[0] || {}).min"}, {"signal": "(data(\"data_0_view_1_x_domain_num_exhibitions\")[0] || {}).max"}], "range": [0, {"signal": "width"}], "zero": true, "nice": true}, {"name": "view_1_y", "type": "linear", "domain": [{"signal": "(data(\"data_0_view_1_y_domain_total_paintings\")[0] || {}).min"}, {"signal": "(data(\"data_0_view_1_y_domain_total_paintings\")[0] || {}).max"}], "range": [{"signal": "view_1_height"}, 0], "nice": true, "zero": true}, {"name": "concat_1_x", "type": "band", "domain": {"data": "data_1_concat_1_x_domain_country", "field": "country", "sort": {"op": "max", "field": "sort_field", "order": "descending"}}, "range": [0, {"signal": "width"}], "paddingInner": 0.1, "paddingOuter": 0.05}, {"name": "concat_1_y", "type": "linear", "domain": [{"signal": "(data(\"data_2_concat_1_y_domain_sum_num_exhibitions\")[0] || {}).min"}, {"signal": "(data(\"data_2_concat_1_y_domain_sum_num_exhibitions\")[0] || {}).max"}], "range": [{"signal": "concat_1_height"}, 0], "nice": true, "zero": true}], "title": {"text": "Exhibition Distribution Across Cities and Countries", "anchor": "middle", "fontSize": 20}, "layout": {"padding": 20, "columns": 1, "bounds": "full", "align": "each"}, "width": 800, "config": {"axis": {"labelFontSize": 12, "titleFontSize": 14}, "style": {"cell": {"stroke": null}}}, "background": "white", "padding": 5, "legends": [{"fill": "color", "symbolType": "circle", "title": "country", "encode": {"symbols": {"update": {"opacity": {"value": 0.7}}}}}, {"title": "Number of Venues", "size": "size", "symbolType": "circle", "encode": {"symbols": {"update": {"fill": {"value": "lightgray"}, "opacity": {"value": 0.7}, "stroke": {"value": "transparent"}}}}}]};
      var embedOpt = {"mode": "vega"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>