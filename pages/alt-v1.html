<!DOCTYPE html>
<html>
<head>
  <style>
    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "param_2_store", "values": []}, {"name": "source_0", "values": [{"country": "AT", "city": "Vienna", "num_exhibitions": 4592, "total_paintings": 21002, "unique_venues": 13, "latitude": 48.2167, "longitude": 16.3667, "_vgsid_": 1}, {"country": "BE", "city": "Antwerp", "num_exhibitions": 9, "total_paintings": 43, "unique_venues": 1, "latitude": 51.213886, "longitude": 4.401514, "_vgsid_": 2}, {"country": "BE", "city": "Brussels", "num_exhibitions": 2156, "total_paintings": 8777, "unique_venues": 10, "latitude": 50.833333, "longitude": 4.333333, "_vgsid_": 3}, {"country": "BE", "city": "Ghent", "num_exhibitions": 668, "total_paintings": 1176, "unique_venues": 1, "latitude": 51.05, "longitude": 3.716667, "_vgsid_": 4}, {"country": "BE", "city": "Ostend", "num_exhibitions": 96, "total_paintings": 364, "unique_venues": 2, "latitude": 51.223392, "longitude": 2.911854, "_vgsid_": 5}, {"country": "CH", "city": "Basel", "num_exhibitions": 192, "total_paintings": 664, "unique_venues": 2, "latitude": 47.558395, "longitude": 7.573271, "_vgsid_": 6}, {"country": "CH", "city": "Luzern", "num_exhibitions": 14, "total_paintings": 59, "unique_venues": 1, "latitude": 47.083333, "longitude": 8.266667, "_vgsid_": 7}, {"country": "CH", "city": "Weggis", "num_exhibitions": 41, "total_paintings": 204, "unique_venues": 1, "latitude": 47.03208, "longitude": 8.432192, "_vgsid_": 8}, {"country": "CH", "city": "Zurich", "num_exhibitions": 232, "total_paintings": 912, "unique_venues": 3, "latitude": 47.366667, "longitude": 8.55, "_vgsid_": 9}, {"country": "CZ", "city": "Chrudim", "num_exhibitions": 20, "total_paintings": 87, "unique_venues": 1, "latitude": 49.95, "longitude": 15.7833, "_vgsid_": 10}, {"country": "CZ", "city": "Hodon\u00edn", "num_exhibitions": 280, "total_paintings": 1111, "unique_venues": 3, "latitude": 48.856, "longitude": 17.123, "_vgsid_": 11}, {"country": "CZ", "city": "Kladno", "num_exhibitions": 50, "total_paintings": 150, "unique_venues": 2, "latitude": 50.1667, "longitude": 14.1167, "_vgsid_": 12}, {"country": "CZ", "city": "Krom\u011b\u0159\u00ed\u017e", "num_exhibitions": 27, "total_paintings": 100, "unique_venues": 1, "latitude": 49.3167, "longitude": 17.45, "_vgsid_": 13}, {"country": "CZ", "city": "Olomouc", "num_exhibitions": 36, "total_paintings": 144, "unique_venues": 1, "latitude": 49.6333, "longitude": 17.25, "_vgsid_": 14}, {"country": "CZ", "city": "Prague", "num_exhibitions": 1781, "total_paintings": 9472, "unique_venues": 14, "latitude": 50.1, "longitude": 14.4333, "_vgsid_": 15}, {"country": "CZ", "city": "Prost\u011bjov", "num_exhibitions": 2, "total_paintings": 194, "unique_venues": 2, "latitude": 49.4667, "longitude": 17.1167, "_vgsid_": 16}, {"country": "CZ", "city": "Vala\u0161sk\u00e9 Mezi\u0159\u00ed\u010d\u00ed", "num_exhibitions": 28, "total_paintings": 127, "unique_venues": 1, "latitude": 49.4833, "longitude": 17.95, "_vgsid_": 17}, {"country": "DE", "city": "-", "num_exhibitions": 633, "total_paintings": 1148, "unique_venues": 1, "latitude": 51.5, "longitude": 10.5, "_vgsid_": 18}, {"country": "DE", "city": "Berlin", "num_exhibitions": 5416, "total_paintings": 22630, "unique_venues": 18, "latitude": 52.516667, "longitude": 13.4, "_vgsid_": 19}, {"country": "DE", "city": "Brandenburg an der Havel", "num_exhibitions": 8, "total_paintings": 43, "unique_venues": 1, "latitude": 52.416667, "longitude": 12.55, "_vgsid_": 20}, {"country": "DE", "city": "Bremen", "num_exhibitions": 793, "total_paintings": 1940, "unique_venues": 1, "latitude": 53.083333, "longitude": 8.8, "_vgsid_": 21}, {"country": "DE", "city": "Chemnitz", "num_exhibitions": 1, "total_paintings": 22, "unique_venues": 1, "latitude": 50.833333, "longitude": 12.916667, "_vgsid_": 22}, {"country": "DE", "city": "Cologne", "num_exhibitions": 1273, "total_paintings": 3984, "unique_venues": 7, "latitude": 50.933333, "longitude": 6.95, "_vgsid_": 23}, {"country": "DE", "city": "Darmstadt", "num_exhibitions": 190, "total_paintings": 311, "unique_venues": 1, "latitude": 49.870556, "longitude": 8.649444, "_vgsid_": 24}, {"country": "DE", "city": "Dresden", "num_exhibitions": 180, "total_paintings": 536, "unique_venues": 2, "latitude": 51.05, "longitude": 13.75, "_vgsid_": 25}, {"country": "DE", "city": "Dusseldorf", "num_exhibitions": 909, "total_paintings": 2117, "unique_venues": 3, "latitude": 51.216667, "longitude": 6.766667, "_vgsid_": 26}, {"country": "DE", "city": "Essen", "num_exhibitions": 86, "total_paintings": 127, "unique_venues": 1, "latitude": 51.45, "longitude": 6.95, "_vgsid_": 27}, {"country": "DE", "city": "Frankfurt am Main", "num_exhibitions": 78, "total_paintings": 456, "unique_venues": 2, "latitude": 50.116667, "longitude": 8.683333, "_vgsid_": 28}, {"country": "DE", "city": "Hagen", "num_exhibitions": 1, "total_paintings": 30, "unique_venues": 1, "latitude": 51.35, "longitude": 7.466667, "_vgsid_": 29}, {"country": "DE", "city": "Hamburg", "num_exhibitions": 95, "total_paintings": 464, "unique_venues": 4, "latitude": 53.55, "longitude": 10.0, "_vgsid_": 30}, {"country": "DE", "city": "Jena", "num_exhibitions": 1, "total_paintings": 4, "unique_venues": 1, "latitude": 50.933333, "longitude": 11.583333, "_vgsid_": 31}, {"country": "DE", "city": "Krefeld", "num_exhibitions": 1, "total_paintings": 1, "unique_venues": 1, "latitude": 51.333333, "longitude": 6.566667, "_vgsid_": 32}, {"country": "DE", "city": "Leipzig", "num_exhibitions": 535, "total_paintings": 847, "unique_venues": 3, "latitude": 51.3333, "longitude": 12.4167, "_vgsid_": 33}, {"country": "DE", "city": "Magdeburg", "num_exhibitions": 1, "total_paintings": 5, "unique_venues": 1, "latitude": 52.166667, "longitude": 11.666667, "_vgsid_": 34}, {"country": "DE", "city": "Mannheim", "num_exhibitions": 479, "total_paintings": 962, "unique_venues": 2, "latitude": 49.488333, "longitude": 8.464722, "_vgsid_": 35}, {"country": "DE", "city": "Munich", "num_exhibitions": 8073, "total_paintings": 19355, "unique_venues": 12, "latitude": 48.15, "longitude": 11.583333, "_vgsid_": 36}, {"country": "DE", "city": "Stuttgart", "num_exhibitions": 196, "total_paintings": 456, "unique_venues": 2, "latitude": 48.766667, "longitude": 9.183333, "_vgsid_": 37}, {"country": "DE", "city": "Weimar", "num_exhibitions": 153, "total_paintings": 309, "unique_venues": 2, "latitude": 50.983333, "longitude": 11.316667, "_vgsid_": 38}, {"country": "ES", "city": "Barcelona", "num_exhibitions": 8, "total_paintings": 38, "unique_venues": 1, "latitude": 41.398371, "longitude": 2.1741, "_vgsid_": 39}, {"country": "FR", "city": "Paris", "num_exhibitions": 4578, "total_paintings": 21806, "unique_venues": 38, "latitude": 48.866667, "longitude": 2.333333, "_vgsid_": 40}, {"country": "FR", "city": "Rouen", "num_exhibitions": 93, "total_paintings": 346, "unique_venues": 2, "latitude": 49.433333, "longitude": 1.083333, "_vgsid_": 41}, {"country": "FR", "city": "Strasbourg", "num_exhibitions": 194, "total_paintings": 504, "unique_venues": 2, "latitude": 48.600381, "longitude": 7.787355, "_vgsid_": 42}, {"country": "FR", "city": "Toulouse", "num_exhibitions": 356, "total_paintings": 2337, "unique_venues": 4, "latitude": 43.599516, "longitude": 1.433188, "_vgsid_": 43}, {"country": "GB", "city": "Brighton", "num_exhibitions": 239, "total_paintings": 609, "unique_venues": 1, "latitude": 50.833333, "longitude": -0.15, "_vgsid_": 44}, {"country": "GB", "city": "Glasgow", "num_exhibitions": 21, "total_paintings": 76, "unique_venues": 1, "latitude": 55.833333, "longitude": -4.25, "_vgsid_": 45}, {"country": "GB", "city": "Liverpool", "num_exhibitions": 49, "total_paintings": 157, "unique_venues": 1, "latitude": 53.416667, "longitude": -3.0, "_vgsid_": 46}, {"country": "GB", "city": "London", "num_exhibitions": 6308, "total_paintings": 20284, "unique_venues": 18, "latitude": 51.514248, "longitude": -0.093145, "_vgsid_": 47}, {"country": "GB", "city": "Unknown City", "num_exhibitions": 237, "total_paintings": 494, "unique_venues": 2, "latitude": 0.0, "longitude": 0.0, "_vgsid_": 48}, {"country": "HU", "city": "Budapest", "num_exhibitions": 3226, "total_paintings": 15126, "unique_venues": 7, "latitude": 47.5, "longitude": 19.05, "_vgsid_": 49}, {"country": "IT", "city": "Florence", "num_exhibitions": 98, "total_paintings": 745, "unique_venues": 2, "latitude": 43.766667, "longitude": 11.25, "_vgsid_": 50}, {"country": "IT", "city": "Milan", "num_exhibitions": 791, "total_paintings": 2224, "unique_venues": 2, "latitude": 45.466667, "longitude": 9.2, "_vgsid_": 51}, {"country": "IT", "city": "Naples", "num_exhibitions": 6, "total_paintings": 87, "unique_venues": 1, "latitude": 40.833333, "longitude": 14.25, "_vgsid_": 52}, {"country": "IT", "city": "Rome", "num_exhibitions": 798, "total_paintings": 2012, "unique_venues": 4, "latitude": 41.9, "longitude": 12.483333, "_vgsid_": 53}, {"country": "IT", "city": "Venice", "num_exhibitions": 5040, "total_paintings": 14982, "unique_venues": 2, "latitude": 45.438611, "longitude": 12.326667, "_vgsid_": 54}, {"country": "JP", "city": "Tokyo", "num_exhibitions": 25, "total_paintings": 69, "unique_venues": 1, "latitude": 35.75, "longitude": 139.5, "_vgsid_": 55}, {"country": "LT", "city": "Vilnius", "num_exhibitions": 17, "total_paintings": 153, "unique_venues": 1, "latitude": 54.6833, "longitude": 25.3167, "_vgsid_": 56}, {"country": "LV", "city": "Riga", "num_exhibitions": 30, "total_paintings": 213, "unique_venues": 1, "latitude": 56.95, "longitude": 24.1, "_vgsid_": 57}, {"country": "NL", "city": "Amsterdam", "num_exhibitions": 4610, "total_paintings": 11021, "unique_venues": 10, "latitude": 52.35, "longitude": 4.916667, "_vgsid_": 58}, {"country": "NL", "city": "Arnhem", "num_exhibitions": 295, "total_paintings": 387, "unique_venues": 1, "latitude": 51.983333, "longitude": 5.916667, "_vgsid_": 59}, {"country": "NL", "city": "Domburg", "num_exhibitions": 34, "total_paintings": 161, "unique_venues": 1, "latitude": 51.566667, "longitude": 3.5, "_vgsid_": 60}, {"country": "NL", "city": "Nijmegen", "num_exhibitions": 44, "total_paintings": 122, "unique_venues": 1, "latitude": 51.833333, "longitude": 5.866667, "_vgsid_": 61}, {"country": "NL", "city": "Rotterdam", "num_exhibitions": 11, "total_paintings": 381, "unique_venues": 2, "latitude": 51.916667, "longitude": 4.5, "_vgsid_": 62}, {"country": "NL", "city": "Utrecht", "num_exhibitions": 2, "total_paintings": 118, "unique_venues": 2, "latitude": 52.083333, "longitude": 5.133333, "_vgsid_": 63}, {"country": "NO", "city": "Christiania", "num_exhibitions": 4, "total_paintings": 360, "unique_venues": 2, "latitude": 59.9333, "longitude": 10.75, "_vgsid_": 64}, {"country": "PL", "city": "Breslau", "num_exhibitions": 2, "total_paintings": 58, "unique_venues": 2, "latitude": 51.1, "longitude": 17.0, "_vgsid_": 65}, {"country": "PL", "city": "Cracow", "num_exhibitions": 37, "total_paintings": 315, "unique_venues": 1, "latitude": 50.05, "longitude": 19.9167, "_vgsid_": 66}, {"country": "RU", "city": "Ekaterinodar", "num_exhibitions": 28, "total_paintings": 79, "unique_venues": 1, "latitude": 45.0333, "longitude": 39.0, "_vgsid_": 67}, {"country": "RU", "city": "Moscow", "num_exhibitions": 1202, "total_paintings": 8303, "unique_venues": 11, "latitude": 55.75, "longitude": 37.7, "_vgsid_": 68}, {"country": "RU", "city": "Saint Petersburg", "num_exhibitions": 1001, "total_paintings": 6895, "unique_venues": 12, "latitude": 59.8833, "longitude": 30.25, "_vgsid_": 69}, {"country": "SE", "city": "Gothenburg", "num_exhibitions": 375, "total_paintings": 813, "unique_venues": 3, "latitude": 57.7167, "longitude": 11.9667, "_vgsid_": 70}, {"country": "SE", "city": "Stockholm", "num_exhibitions": 95, "total_paintings": 619, "unique_venues": 5, "latitude": 59.3333, "longitude": 18.0833, "_vgsid_": 71}, {"country": "UA", "city": "Kiev", "num_exhibitions": 101, "total_paintings": 681, "unique_venues": 2, "latitude": 50.4333, "longitude": 30.5167, "_vgsid_": 72}, {"country": "UA", "city": "Odessa", "num_exhibitions": 55, "total_paintings": 419, "unique_venues": 1, "latitude": 46.5, "longitude": 30.7667, "_vgsid_": 73}, {"country": "US", "city": "Boston", "num_exhibitions": 55, "total_paintings": 220, "unique_venues": 1, "latitude": 42.35, "longitude": -71.05, "_vgsid_": 74}, {"country": "US", "city": "Chicago", "num_exhibitions": 157, "total_paintings": 404, "unique_venues": 2, "latitude": 41.85, "longitude": -87.65, "_vgsid_": 75}, {"country": "US", "city": "Cincinnati", "num_exhibitions": 21, "total_paintings": 34, "unique_venues": 1, "latitude": 39.15, "longitude": -84.45, "_vgsid_": 76}, {"country": "US", "city": "Dresden", "num_exhibitions": 2, "total_paintings": 40, "unique_venues": 2, "latitude": 51.05, "longitude": 13.75, "_vgsid_": 77}, {"country": "US", "city": "New York", "num_exhibitions": 799, "total_paintings": 3199, "unique_venues": 12, "latitude": 40.7, "longitude": -74.0, "_vgsid_": 78}, {"country": "US", "city": "Pittsburgh", "num_exhibitions": 1229, "total_paintings": 1656, "unique_venues": 1, "latitude": 40.4333, "longitude": -79.9833, "_vgsid_": 79}, {"country": "US", "city": "San Francisco", "num_exhibitions": 1, "total_paintings": 1, "unique_venues": 1, "latitude": 37.7667, "longitude": -122.4167, "_vgsid_": 80}, {"country": "Unknown Country", "city": "-", "num_exhibitions": 5, "total_paintings": 56, "unique_venues": 1, "latitude": 49.75, "longitude": 15.0, "_vgsid_": 81}, {"country": "Unknown Country", "city": "Christiania", "num_exhibitions": 1, "total_paintings": 62, "unique_venues": 1, "latitude": 59.9333, "longitude": 10.75, "_vgsid_": 82}]}, {"name": "data_0", "source": "source_0", "transform": [{"type": "geojson", "fields": ["longitude", "latitude"], "signal": "view_2_geojson_0"}, {"type": "geopoint", "projection": "projection", "fields": ["longitude", "latitude"], "as": ["view_2_x", "view_2_y"]}, {"type": "filter", "expr": "isValid(datum[\"num_exhibitions\"]) && isFinite(+datum[\"num_exhibitions\"])"}]}, {"name": "data_1", "source": "source_0", "transform": [{"type": "filter", "expr": "!length(data(\"param_2_store\")) || vlSelectionIdTest(\"param_2_store\", datum)"}, {"type": "project", "fields": ["_vgsid_", "city", "country", "num_exhibitions", "total_paintings", "unique_venues"]}]}, {"name": "data_2", "source": "data_1", "transform": [{"type": "aggregate", "groupby": ["country"], "fields": ["num_exhibitions", "total_paintings"], "ops": ["sum", "sum"], "as": ["sum_num_exhibitions", "sum_total_paintings"]}, {"type": "filter", "expr": "isValid(datum[\"sum_num_exhibitions\"]) && isFinite(+datum[\"sum_num_exhibitions\"])"}, {"type": "project", "fields": ["_vgsid_", "country", "sum_num_exhibitions", "sum_total_paintings"]}]}, {"name": "data_3", "source": "data_1", "transform": [{"type": "filter", "expr": "isValid(datum[\"num_exhibitions\"]) && isFinite(+datum[\"num_exhibitions\"]) && isValid(datum[\"total_paintings\"]) && isFinite(+datum[\"total_paintings\"]) && isValid(datum[\"unique_venues\"]) && isFinite(+datum[\"unique_venues\"])"}, {"type": "project", "fields": ["_vgsid_", "city", "country", "num_exhibitions", "total_paintings", "unique_venues"]}]}, {"name": "data_0_color_domain_country_0", "source": "data_0", "transform": [{"type": "aggregate", "groupby": ["country"], "fields": [], "ops": [], "as": []}, {"type": "formula", "expr": "datum['country']", "as": "sort_field"}, {"type": "project", "fields": ["country"]}]}, {"name": "data_2_color_domain_country_1", "source": "data_2", "transform": [{"type": "aggregate", "groupby": ["country"], "fields": [], "ops": [], "as": []}, {"type": "formula", "expr": "datum['country']", "as": "sort_field"}, {"type": "project", "fields": ["country"]}]}, {"name": "data_3_color_domain_country_2", "source": "data_3", "transform": [{"type": "aggregate", "groupby": ["country"], "fields": [], "ops": [], "as": []}, {"type": "formula", "expr": "datum['country']", "as": "sort_field"}, {"type": "project", "fields": ["country"]}]}, {"name": "data_1_concat_1_concat_0_x_domain_country", "source": "data_1", "transform": [{"type": "aggregate", "groupby": ["country"], "fields": ["num_exhibitions"], "ops": ["sum"], "as": ["sort_field"]}, {"type": "project", "fields": ["country", "sort_field"]}]}, {"name": "data_2_concat_1_concat_0_y_domain_sum_num_exhibitions", "source": "data_2", "transform": [{"type": "formula", "expr": "+datum['sum_num_exhibitions']", "as": "sum_num_exhibitions"}, {"type": "aggregate", "groupby": [], "fields": ["sum_num_exhibitions", "sum_num_exhibitions"], "ops": ["min", "max"], "as": ["min", "max"]}]}, {"name": "data_3_concat_1_concat_1_x_domain_num_exhibitions", "source": "data_3", "transform": [{"type": "formula", "expr": "+datum['num_exhibitions']", "as": "num_exhibitions"}, {"type": "aggregate", "groupby": [], "fields": ["num_exhibitions", "num_exhibitions"], "ops": ["min", "max"], "as": ["min", "max"]}]}, {"name": "data_3_concat_1_concat_1_y_domain_total_paintings", "source": "data_3", "transform": [{"type": "formula", "expr": "+datum['total_paintings']", "as": "total_paintings"}, {"type": "aggregate", "groupby": [], "fields": ["total_paintings", "total_paintings"], "ops": ["min", "max"], "as": ["min", "max"]}]}], "signals": [{"name": "view_2_width", "value": 800}, {"name": "view_2_height", "value": 300}, {"name": "concat_1_height", "value": 150}, {"name": "concat_1_childWidth", "value": 800}, {"name": "unit", "value": {}, "on": [{"events": "pointermove", "update": "isTuple(group()) ? group() : unit"}]}, {"name": "param_2", "update": "vlSelectionResolve(\"param_2_store\", \"union\")"}], "marks": [{"type": "group", "name": "view_2_group", "encode": {"update": {"height": {"signal": "view_2_height"}, "width": {"signal": "view_2_width"}}}, "signals": [{"name": "param_2_longitude_1", "value": [], "on": [{"events": {"source": "scope", "filter": ["!event.item || event.item.mark.name !== \"param_2_brush\""], "type": "pointerdown"}, "update": "[x(unit), x(unit)]"}, {"events": {"source": "window", "between": [{"source": "scope", "filter": ["!event.item || event.item.mark.name !== \"param_2_brush\""], "type": "pointerdown"}, {"source": "window", "type": "pointerup"}], "type": "pointermove", "consume": true}, "update": "[param_2_longitude_1[0], clamp(x(unit), 0, view_2_width)]"}, {"events": [{"source": "view", "type": "dblclick"}], "update": "[0, 0]"}, {"events": {"signal": "param_2_translate_delta"}, "update": "clampRange(panLinear(param_2_translate_anchor.extent_x, param_2_translate_delta.x / span(param_2_translate_anchor.extent_x)), 0, view_2_width)"}, {"events": {"signal": "param_2_zoom_delta"}, "update": "clampRange(zoomLinear(param_2_longitude_1, param_2_zoom_anchor.x, param_2_zoom_delta), 0, view_2_width)"}]}, {"name": "param_2_latitude_1", "value": [], "on": [{"events": {"source": "scope", "filter": ["!event.item || event.item.mark.name !== \"param_2_brush\""], "type": "pointerdown"}, "update": "[y(unit), y(unit)]"}, {"events": {"source": "window", "between": [{"source": "scope", "filter": ["!event.item || event.item.mark.name !== \"param_2_brush\""], "type": "pointerdown"}, {"source": "window", "type": "pointerup"}], "type": "pointermove", "consume": true}, "update": "[param_2_latitude_1[0], clamp(y(unit), 0, view_2_height)]"}, {"events": [{"source": "view", "type": "dblclick"}], "update": "[0, 0]"}, {"events": {"signal": "param_2_translate_delta"}, "update": "clampRange(panLinear(param_2_translate_anchor.extent_y, param_2_translate_delta.y / span(param_2_translate_anchor.extent_y)), 0, view_2_height)"}, {"events": {"signal": "param_2_zoom_delta"}, "update": "clampRange(zoomLinear(param_2_latitude_1, param_2_zoom_anchor.y, param_2_zoom_delta), 0, view_2_height)"}]}, {"name": "param_2_tuple", "on": [{"events": [{"signal": "param_2_longitude_1 || param_2_latitude_1"}], "update": "vlSelectionTuples(intersect([[param_2_longitude_1[0], param_2_latitude_1[0]],[param_2_longitude_1[1], param_2_latitude_1[1]]], {markname: \"view_2_marks\"}, unit.mark), {unit: \"view_2\"})"}]}, {"name": "param_2_translate_anchor", "value": {}, "on": [{"events": [{"source": "scope", "markname": "param_2_brush", "type": "pointerdown"}], "update": "{x: x(unit), y: y(unit), extent_x: slice(param_2_longitude_1), extent_y: slice(param_2_latitude_1)}"}]}, {"name": "param_2_translate_delta", "value": {}, "on": [{"events": [{"source": "window", "between": [{"source": "scope", "markname": "param_2_brush", "type": "pointerdown"}, {"source": "window", "type": "pointerup"}], "type": "pointermove", "consume": true}], "update": "{x: param_2_translate_anchor.x - x(unit), y: param_2_translate_anchor.y - y(unit)}"}]}, {"name": "param_2_zoom_anchor", "on": [{"events": [{"source": "scope", "markname": "param_2_brush", "consume": true, "type": "wheel"}], "update": "{x: x(unit), y: y(unit)}"}]}, {"name": "param_2_zoom_delta", "on": [{"events": [{"source": "scope", "markname": "param_2_brush", "consume": true, "type": "wheel"}], "update": "pow(1.001, event.deltaY * pow(16, event.deltaMode))", "force": true}]}, {"name": "param_2_modify", "on": [{"events": {"signal": "param_2_tuple"}, "update": "modify(\"param_2_store\", param_2_tuple, true)"}]}], "marks": [{"type": "rect", "name": "param_2_brush_bg", "encode": {"enter": {"fillOpacity": {"value": 0.125}, "fill": {"value": "#333"}}, "update": {"x": [{"signal": "param_2_longitude_1[0]", "test": "data(\"param_2_store\").length && data(\"param_2_store\")[0].unit === \"view_2\""}, {"value": 0}], "x2": [{"signal": "param_2_longitude_1[1]", "test": "data(\"param_2_store\").length && data(\"param_2_store\")[0].unit === \"view_2\""}, {"value": 0}], "y": [{"signal": "param_2_latitude_1[0]", "test": "data(\"param_2_store\").length && data(\"param_2_store\")[0].unit === \"view_2\""}, {"value": 0}], "y2": [{"signal": "param_2_latitude_1[1]", "test": "data(\"param_2_store\").length && data(\"param_2_store\")[0].unit === \"view_2\""}, {"value": 0}]}}, "clip": true}, {"type": "symbol", "name": "view_2_marks", "from": {"data": "data_0"}, "encode": {"update": {"fill": [{"field": "country", "scale": "color", "test": "!length(data(\"param_2_store\")) || vlSelectionIdTest(\"param_2_store\", datum)"}, {"value": "lightgray"}], "shape": {"value": "circle"}, "size": {"field": "num_exhibitions", "scale": "size"}, "y": {"field": "view_2_y"}, "x": {"field": "view_2_x"}, "opacity": {"value": 0.7}, "tooltip": {"signal": "{\"Country\": isValid(datum[\"country\"]) ? datum[\"country\"] : \"\"+datum[\"country\"], \"City\": isValid(datum[\"city\"]) ? datum[\"city\"] : \"\"+datum[\"city\"], \"Number of Exhibitions\": format(datum[\"num_exhibitions\"], \"\"), \"Total Paintings\": format(datum[\"total_paintings\"], \"\"), \"Number of Venues\": format(datum[\"unique_venues\"], \"\")}"}}}, "interactive": true, "style": ["circle"]}, {"type": "rect", "name": "param_2_brush", "encode": {"update": {"x2": [{"signal": "param_2_longitude_1[1]", "test": "data(\"param_2_store\").length && data(\"param_2_store\")[0].unit === \"view_2\""}, {"value": 0}], "y2": [{"signal": "param_2_latitude_1[1]", "test": "data(\"param_2_store\").length && data(\"param_2_store\")[0].unit === \"view_2\""}, {"value": 0}], "stroke": [{"value": "white", "test": "param_2_longitude_1[0] !== param_2_longitude_1[1] && param_2_latitude_1[0] !== param_2_latitude_1[1]"}, {}], "x": [{"signal": "param_2_longitude_1[0]", "test": "data(\"param_2_store\").length && data(\"param_2_store\")[0].unit === \"view_2\""}, {"value": 0}], "y": [{"signal": "param_2_latitude_1[0]", "test": "data(\"param_2_store\").length && data(\"param_2_store\")[0].unit === \"view_2\""}, {"value": 0}]}, "enter": {"cursor": {"value": "move"}, "fill": {"value": "transparent"}}}, "clip": true}], "title": {"text": "Exhibition Locations", "frame": "group", "anchor": "middle"}, "style": "view"}, {"type": "group", "name": "concat_1_group", "marks": [{"type": "group", "name": "concat_1_concat_0_group", "encode": {"update": {"height": {"signal": "concat_1_height"}, "width": {"signal": "concat_1_childWidth"}}}, "marks": [{"type": "rect", "name": "concat_1_concat_0_marks", "from": {"data": "data_2"}, "encode": {"update": {"fill": [{"field": "country", "scale": "color", "test": "!length(data(\"param_2_store\")) || vlSelectionIdTest(\"param_2_store\", datum)"}, {"value": "lightgray"}], "y2": {"value": 0, "scale": "concat_1_concat_0_y"}, "width": {"signal": "max(0.25, bandwidth('concat_1_concat_0_x'))"}, "y": {"field": "sum_num_exhibitions", "scale": "concat_1_concat_0_y"}, "tooltip": {"signal": "{\"Country\": isValid(datum[\"country\"]) ? datum[\"country\"] : \"\"+datum[\"country\"], \"Total Exhibitions\": format(datum[\"sum_num_exhibitions\"], \"\"), \"Total Paintings\": format(datum[\"sum_total_paintings\"], \"\")}"}, "x": {"field": "country", "scale": "concat_1_concat_0_x"}}}, "interactive": true, "style": ["bar"]}], "axes": [{"scale": "concat_1_concat_0_y", "domain": false, "ticks": false, "orient": "left", "tickCount": {"signal": "ceil(concat_1_height/40)"}, "minExtent": 0, "gridScale": "concat_1_concat_0_x", "grid": true, "labels": false, "aria": false, "zindex": 0, "maxExtent": 0}, {"scale": "concat_1_concat_0_x", "labelAlign": "right", "labelAngle": 270, "zindex": 0, "grid": false, "labelBaseline": "middle", "orient": "bottom", "title": "Country"}, {"scale": "concat_1_concat_0_y", "title": "Number of Exhibitions", "labelOverlap": true, "tickCount": {"signal": "ceil(concat_1_height/40)"}, "grid": false, "zindex": 0, "orient": "left"}], "style": "cell"}, {"type": "group", "name": "concat_1_concat_1_group", "encode": {"update": {"width": {"signal": "concat_1_childWidth"}, "height": {"signal": "concat_1_height"}}}, "marks": [{"type": "symbol", "name": "concat_1_concat_1_marks", "from": {"data": "data_3"}, "encode": {"update": {"size": {"field": "unique_venues", "scale": "size"}, "x": {"field": "num_exhibitions", "scale": "concat_1_concat_1_x"}, "opacity": {"value": 0.7}, "y": {"field": "total_paintings", "scale": "concat_1_concat_1_y"}, "fill": [{"field": "country", "scale": "color", "test": "!length(data(\"param_2_store\")) || vlSelectionIdTest(\"param_2_store\", datum)"}, {"value": "lightgray"}], "tooltip": {"signal": "{\"Country\": isValid(datum[\"country\"]) ? datum[\"country\"] : \"\"+datum[\"country\"], \"City\": isValid(datum[\"city\"]) ? datum[\"city\"] : \"\"+datum[\"city\"], \"Number of Exhibitions\": format(datum[\"num_exhibitions\"], \"\"), \"Total Paintings\": format(datum[\"total_paintings\"], \"\"), \"Number of Venues\": format(datum[\"unique_venues\"], \"\")}"}, "shape": {"value": "circle"}}}, "interactive": true, "style": ["circle"]}], "axes": [{"scale": "concat_1_concat_1_x", "maxExtent": 0, "minExtent": 0, "tickCount": {"signal": "ceil(concat_1_childWidth/40)"}, "ticks": false, "domain": false, "labels": false, "zindex": 0, "orient": "bottom", "grid": true, "aria": false, "gridScale": "concat_1_concat_1_y"}, {"scale": "concat_1_concat_1_y", "minExtent": 0, "gridScale": "concat_1_concat_1_x", "ticks": false, "labels": false, "grid": true, "maxExtent": 0, "aria": false, "zindex": 0, "orient": "left", "domain": false, "tickCount": {"signal": "ceil(concat_1_height/40)"}}, {"scale": "concat_1_concat_1_x", "title": "Number of Exhibitions", "orient": "bottom", "tickCount": {"signal": "ceil(concat_1_childWidth/40)"}, "labelFlush": true, "grid": false, "labelOverlap": true, "zindex": 0}, {"scale": "concat_1_concat_1_y", "title": "Total Paintings", "orient": "left", "grid": false, "labelOverlap": true, "tickCount": {"signal": "ceil(concat_1_height/40)"}, "zindex": 0}], "style": "cell"}], "layout": {"padding": 20, "bounds": "full", "align": "each"}}], "scales": [{"name": "color", "type": "ordinal", "domain": {"fields": [{"data": "data_0_color_domain_country_0", "field": "country"}, {"data": "data_2_color_domain_country_1", "field": "country"}, {"data": "data_3_color_domain_country_2", "field": "country"}], "sort": true}, "range": "category"}, {"name": "size", "type": "linear", "domain": {"fields": [{"data": "data_0", "field": "num_exhibitions"}, {"data": "data_3", "field": "unique_venues"}]}, "range": [50, 1000], "zero": true}, {"name": "concat_1_concat_0_x", "type": "band", "domain": {"data": "data_1_concat_1_concat_0_x_domain_country", "field": "country", "sort": {"op": "max", "field": "sort_field", "order": "descending"}}, "range": [0, {"signal": "concat_1_childWidth"}], "paddingOuter": 0.05, "paddingInner": 0.1}, {"name": "concat_1_concat_0_y", "type": "linear", "domain": [{"signal": "(data(\"data_2_concat_1_concat_0_y_domain_sum_num_exhibitions\")[0] || {}).min"}, {"signal": "(data(\"data_2_concat_1_concat_0_y_domain_sum_num_exhibitions\")[0] || {}).max"}], "range": [{"signal": "concat_1_height"}, 0], "nice": true, "zero": true}, {"name": "concat_1_concat_1_x", "type": "linear", "domain": [{"signal": "(data(\"data_3_concat_1_concat_1_x_domain_num_exhibitions\")[0] || {}).min"}, {"signal": "(data(\"data_3_concat_1_concat_1_x_domain_num_exhibitions\")[0] || {}).max"}], "range": [0, {"signal": "concat_1_childWidth"}], "nice": true, "zero": true}, {"name": "concat_1_concat_1_y", "type": "linear", "domain": [{"signal": "(data(\"data_3_concat_1_concat_1_y_domain_total_paintings\")[0] || {}).min"}, {"signal": "(data(\"data_3_concat_1_concat_1_y_domain_total_paintings\")[0] || {}).max"}], "range": [{"signal": "concat_1_height"}, 0], "zero": true, "nice": true}], "projections": [{"name": "projection", "size": {"signal": "[view_2_width, view_2_height]"}, "fit": {"signal": "view_2_geojson_0"}}], "layout": {"padding": 20, "columns": 1, "bounds": "full", "align": "each"}, "config": {"style": {"cell": {"stroke": null}, "group-title": {"fontSize": 20}}}, "background": "white", "padding": 5, "legends": [{"fill": "color", "symbolType": "circle", "title": "country", "encode": {"symbols": {"update": {"opacity": {"value": 0.7}}}}}, {"title": "Number of Exhibitions, Number of Venues", "size": "size", "symbolType": "circle", "encode": {"symbols": {"update": {"fill": {"value": "lightgray"}, "opacity": {"value": 0.7}, "stroke": {"value": "transparent"}}}}}]};
      var embedOpt = {"mode": "vega"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>