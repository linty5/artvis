<!DOCTYPE html>
<html>
<head>
  <style>
    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "param_8_store"}, {"name": "source_0", "values": [{"city": "-", "country": "DE", "num_exhibitions": 633, "total_paintings": 1148, "unique_artists": 394}, {"city": "-", "country": "Unknown Country", "num_exhibitions": 5, "total_paintings": 56, "unique_artists": 5}, {"city": "Amsterdam", "country": "NL", "num_exhibitions": 4610, "total_paintings": 11021, "unique_artists": 1315}, {"city": "Antwerp", "country": "BE", "num_exhibitions": 9, "total_paintings": 43, "unique_artists": 9}, {"city": "Arnhem", "country": "NL", "num_exhibitions": 295, "total_paintings": 387, "unique_artists": 227}, {"city": "Barcelona", "country": "ES", "num_exhibitions": 8, "total_paintings": 38, "unique_artists": 8}, {"city": "Basel", "country": "CH", "num_exhibitions": 192, "total_paintings": 664, "unique_artists": 96}, {"city": "Berlin", "country": "DE", "num_exhibitions": 5416, "total_paintings": 22630, "unique_artists": 1192}, {"city": "Boston", "country": "US", "num_exhibitions": 55, "total_paintings": 220, "unique_artists": 55}, {"city": "Brandenburg an der Havel", "country": "DE", "num_exhibitions": 8, "total_paintings": 43, "unique_artists": 8}, {"city": "Bremen", "country": "DE", "num_exhibitions": 793, "total_paintings": 1940, "unique_artists": 594}, {"city": "Breslau", "country": "PL", "num_exhibitions": 2, "total_paintings": 58, "unique_artists": 2}, {"city": "Brighton", "country": "GB", "num_exhibitions": 239, "total_paintings": 609, "unique_artists": 239}, {"city": "Brussels", "country": "BE", "num_exhibitions": 2156, "total_paintings": 8777, "unique_artists": 769}, {"city": "Budapest", "country": "HU", "num_exhibitions": 3226, "total_paintings": 15126, "unique_artists": 1162}, {"city": "Chemnitz", "country": "DE", "num_exhibitions": 1, "total_paintings": 22, "unique_artists": 1}, {"city": "Chicago", "country": "US", "num_exhibitions": 157, "total_paintings": 404, "unique_artists": 157}, {"city": "Christiania", "country": "NO", "num_exhibitions": 4, "total_paintings": 360, "unique_artists": 1}, {"city": "Christiania", "country": "Unknown Country", "num_exhibitions": 1, "total_paintings": 62, "unique_artists": 1}, {"city": "Chrudim", "country": "CZ", "num_exhibitions": 20, "total_paintings": 87, "unique_artists": 20}, {"city": "Cincinnati", "country": "US", "num_exhibitions": 21, "total_paintings": 34, "unique_artists": 21}, {"city": "Cologne", "country": "DE", "num_exhibitions": 1273, "total_paintings": 3984, "unique_artists": 514}, {"city": "Cracow", "country": "PL", "num_exhibitions": 37, "total_paintings": 315, "unique_artists": 37}, {"city": "Darmstadt", "country": "DE", "num_exhibitions": 190, "total_paintings": 311, "unique_artists": 190}, {"city": "Domburg", "country": "NL", "num_exhibitions": 34, "total_paintings": 161, "unique_artists": 17}, {"city": "Dresden", "country": "DE", "num_exhibitions": 180, "total_paintings": 536, "unique_artists": 176}, {"city": "Dresden", "country": "US", "num_exhibitions": 2, "total_paintings": 40, "unique_artists": 1}, {"city": "Dusseldorf", "country": "DE", "num_exhibitions": 909, "total_paintings": 2117, "unique_artists": 592}, {"city": "Ekaterinodar", "country": "RU", "num_exhibitions": 28, "total_paintings": 79, "unique_artists": 28}, {"city": "Essen", "country": "DE", "num_exhibitions": 86, "total_paintings": 127, "unique_artists": 86}, {"city": "Florence", "country": "IT", "num_exhibitions": 98, "total_paintings": 745, "unique_artists": 98}, {"city": "Frankfurt am Main", "country": "DE", "num_exhibitions": 78, "total_paintings": 456, "unique_artists": 38}, {"city": "Ghent", "country": "BE", "num_exhibitions": 668, "total_paintings": 1176, "unique_artists": 668}, {"city": "Glasgow", "country": "GB", "num_exhibitions": 21, "total_paintings": 76, "unique_artists": 21}, {"city": "Gothenburg", "country": "SE", "num_exhibitions": 375, "total_paintings": 813, "unique_artists": 125}, {"city": "Hagen", "country": "DE", "num_exhibitions": 1, "total_paintings": 30, "unique_artists": 1}, {"city": "Hamburg", "country": "DE", "num_exhibitions": 95, "total_paintings": 464, "unique_artists": 86}, {"city": "Hodon\u00edn", "country": "CZ", "num_exhibitions": 280, "total_paintings": 1111, "unique_artists": 87}, {"city": "Jena", "country": "DE", "num_exhibitions": 1, "total_paintings": 4, "unique_artists": 1}, {"city": "Kiev", "country": "UA", "num_exhibitions": 101, "total_paintings": 681, "unique_artists": 84}, {"city": "Kladno", "country": "CZ", "num_exhibitions": 50, "total_paintings": 150, "unique_artists": 25}, {"city": "Krefeld", "country": "DE", "num_exhibitions": 1, "total_paintings": 1, "unique_artists": 1}, {"city": "Krom\u011b\u0159\u00ed\u017e", "country": "CZ", "num_exhibitions": 27, "total_paintings": 100, "unique_artists": 27}, {"city": "Leipzig", "country": "DE", "num_exhibitions": 535, "total_paintings": 847, "unique_artists": 268}, {"city": "Liverpool", "country": "GB", "num_exhibitions": 49, "total_paintings": 157, "unique_artists": 49}, {"city": "London", "country": "GB", "num_exhibitions": 6308, "total_paintings": 20284, "unique_artists": 1927}, {"city": "Luzern", "country": "CH", "num_exhibitions": 14, "total_paintings": 59, "unique_artists": 14}, {"city": "Magdeburg", "country": "DE", "num_exhibitions": 1, "total_paintings": 5, "unique_artists": 1}, {"city": "Mannheim", "country": "DE", "num_exhibitions": 479, "total_paintings": 962, "unique_artists": 438}, {"city": "Milan", "country": "IT", "num_exhibitions": 791, "total_paintings": 2224, "unique_artists": 751}, {"city": "Moscow", "country": "RU", "num_exhibitions": 1202, "total_paintings": 8303, "unique_artists": 555}, {"city": "Munich", "country": "DE", "num_exhibitions": 8073, "total_paintings": 19355, "unique_artists": 2017}, {"city": "Naples", "country": "IT", "num_exhibitions": 6, "total_paintings": 87, "unique_artists": 6}, {"city": "New York", "country": "US", "num_exhibitions": 799, "total_paintings": 3199, "unique_artists": 350}, {"city": "Nijmegen", "country": "NL", "num_exhibitions": 44, "total_paintings": 122, "unique_artists": 44}, {"city": "Odessa", "country": "UA", "num_exhibitions": 55, "total_paintings": 419, "unique_artists": 55}, {"city": "Olomouc", "country": "CZ", "num_exhibitions": 36, "total_paintings": 144, "unique_artists": 36}, {"city": "Ostend", "country": "BE", "num_exhibitions": 96, "total_paintings": 364, "unique_artists": 48}, {"city": "Paris", "country": "FR", "num_exhibitions": 4578, "total_paintings": 21806, "unique_artists": 1531}, {"city": "Pittsburgh", "country": "US", "num_exhibitions": 1229, "total_paintings": 1656, "unique_artists": 575}, {"city": "Prague", "country": "CZ", "num_exhibitions": 1781, "total_paintings": 9472, "unique_artists": 482}, {"city": "Prost\u011bjov", "country": "CZ", "num_exhibitions": 2, "total_paintings": 194, "unique_artists": 1}, {"city": "Riga", "country": "LV", "num_exhibitions": 30, "total_paintings": 213, "unique_artists": 30}, {"city": "Rome", "country": "IT", "num_exhibitions": 798, "total_paintings": 2012, "unique_artists": 576}, {"city": "Rotterdam", "country": "NL", "num_exhibitions": 11, "total_paintings": 381, "unique_artists": 10}, {"city": "Rouen", "country": "FR", "num_exhibitions": 93, "total_paintings": 346, "unique_artists": 51}, {"city": "Saint Petersburg", "country": "RU", "num_exhibitions": 1001, "total_paintings": 6895, "unique_artists": 607}, {"city": "San Francisco", "country": "US", "num_exhibitions": 1, "total_paintings": 1, "unique_artists": 1}, {"city": "Stockholm", "country": "SE", "num_exhibitions": 95, "total_paintings": 619, "unique_artists": 25}, {"city": "Strasbourg", "country": "FR", "num_exhibitions": 194, "total_paintings": 504, "unique_artists": 97}, {"city": "Stuttgart", "country": "DE", "num_exhibitions": 196, "total_paintings": 456, "unique_artists": 98}, {"city": "Tokyo", "country": "JP", "num_exhibitions": 25, "total_paintings": 69, "unique_artists": 25}, {"city": "Toulouse", "country": "FR", "num_exhibitions": 356, "total_paintings": 2337, "unique_artists": 66}, {"city": "Unknown City", "country": "GB", "num_exhibitions": 237, "total_paintings": 494, "unique_artists": 237}, {"city": "Utrecht", "country": "NL", "num_exhibitions": 2, "total_paintings": 118, "unique_artists": 1}, {"city": "Vala\u0161sk\u00e9 Mezi\u0159\u00ed\u010d\u00ed", "country": "CZ", "num_exhibitions": 28, "total_paintings": 127, "unique_artists": 28}, {"city": "Venice", "country": "IT", "num_exhibitions": 5040, "total_paintings": 14982, "unique_artists": 1445}, {"city": "Vienna", "country": "AT", "num_exhibitions": 4592, "total_paintings": 21002, "unique_artists": 1116}, {"city": "Vilnius", "country": "LT", "num_exhibitions": 17, "total_paintings": 153, "unique_artists": 17}, {"city": "Weggis", "country": "CH", "num_exhibitions": 41, "total_paintings": 204, "unique_artists": 28}, {"city": "Weimar", "country": "DE", "num_exhibitions": 153, "total_paintings": 309, "unique_artists": 150}, {"city": "Zurich", "country": "CH", "num_exhibitions": 232, "total_paintings": 912, "unique_artists": 163}]}, {"name": "data_0", "values": [{"city": "-", "country": "DE", "num_exhibitions": 633, "total_paintings": 1148, "unique_artists": 394}, {"city": "-", "country": "Unknown Country", "num_exhibitions": 5, "total_paintings": 56, "unique_artists": 5}, {"city": "Amsterdam", "country": "NL", "num_exhibitions": 4610, "total_paintings": 11021, "unique_artists": 1315}, {"city": "Antwerp", "country": "BE", "num_exhibitions": 9, "total_paintings": 43, "unique_artists": 9}, {"city": "Arnhem", "country": "NL", "num_exhibitions": 295, "total_paintings": 387, "unique_artists": 227}, {"city": "Barcelona", "country": "ES", "num_exhibitions": 8, "total_paintings": 38, "unique_artists": 8}, {"city": "Basel", "country": "CH", "num_exhibitions": 192, "total_paintings": 664, "unique_artists": 96}, {"city": "Berlin", "country": "DE", "num_exhibitions": 5416, "total_paintings": 22630, "unique_artists": 1192}, {"city": "Boston", "country": "US", "num_exhibitions": 55, "total_paintings": 220, "unique_artists": 55}, {"city": "Brandenburg an der Havel", "country": "DE", "num_exhibitions": 8, "total_paintings": 43, "unique_artists": 8}, {"city": "Bremen", "country": "DE", "num_exhibitions": 793, "total_paintings": 1940, "unique_artists": 594}, {"city": "Breslau", "country": "PL", "num_exhibitions": 2, "total_paintings": 58, "unique_artists": 2}, {"city": "Brighton", "country": "GB", "num_exhibitions": 239, "total_paintings": 609, "unique_artists": 239}, {"city": "Brussels", "country": "BE", "num_exhibitions": 2156, "total_paintings": 8777, "unique_artists": 769}, {"city": "Budapest", "country": "HU", "num_exhibitions": 3226, "total_paintings": 15126, "unique_artists": 1162}, {"city": "Chemnitz", "country": "DE", "num_exhibitions": 1, "total_paintings": 22, "unique_artists": 1}, {"city": "Chicago", "country": "US", "num_exhibitions": 157, "total_paintings": 404, "unique_artists": 157}, {"city": "Christiania", "country": "NO", "num_exhibitions": 4, "total_paintings": 360, "unique_artists": 1}, {"city": "Christiania", "country": "Unknown Country", "num_exhibitions": 1, "total_paintings": 62, "unique_artists": 1}, {"city": "Chrudim", "country": "CZ", "num_exhibitions": 20, "total_paintings": 87, "unique_artists": 20}, {"city": "Cincinnati", "country": "US", "num_exhibitions": 21, "total_paintings": 34, "unique_artists": 21}, {"city": "Cologne", "country": "DE", "num_exhibitions": 1273, "total_paintings": 3984, "unique_artists": 514}, {"city": "Cracow", "country": "PL", "num_exhibitions": 37, "total_paintings": 315, "unique_artists": 37}, {"city": "Darmstadt", "country": "DE", "num_exhibitions": 190, "total_paintings": 311, "unique_artists": 190}, {"city": "Domburg", "country": "NL", "num_exhibitions": 34, "total_paintings": 161, "unique_artists": 17}, {"city": "Dresden", "country": "DE", "num_exhibitions": 180, "total_paintings": 536, "unique_artists": 176}, {"city": "Dresden", "country": "US", "num_exhibitions": 2, "total_paintings": 40, "unique_artists": 1}, {"city": "Dusseldorf", "country": "DE", "num_exhibitions": 909, "total_paintings": 2117, "unique_artists": 592}, {"city": "Ekaterinodar", "country": "RU", "num_exhibitions": 28, "total_paintings": 79, "unique_artists": 28}, {"city": "Essen", "country": "DE", "num_exhibitions": 86, "total_paintings": 127, "unique_artists": 86}, {"city": "Florence", "country": "IT", "num_exhibitions": 98, "total_paintings": 745, "unique_artists": 98}, {"city": "Frankfurt am Main", "country": "DE", "num_exhibitions": 78, "total_paintings": 456, "unique_artists": 38}, {"city": "Ghent", "country": "BE", "num_exhibitions": 668, "total_paintings": 1176, "unique_artists": 668}, {"city": "Glasgow", "country": "GB", "num_exhibitions": 21, "total_paintings": 76, "unique_artists": 21}, {"city": "Gothenburg", "country": "SE", "num_exhibitions": 375, "total_paintings": 813, "unique_artists": 125}, {"city": "Hagen", "country": "DE", "num_exhibitions": 1, "total_paintings": 30, "unique_artists": 1}, {"city": "Hamburg", "country": "DE", "num_exhibitions": 95, "total_paintings": 464, "unique_artists": 86}, {"city": "Hodon\u00edn", "country": "CZ", "num_exhibitions": 280, "total_paintings": 1111, "unique_artists": 87}, {"city": "Jena", "country": "DE", "num_exhibitions": 1, "total_paintings": 4, "unique_artists": 1}, {"city": "Kiev", "country": "UA", "num_exhibitions": 101, "total_paintings": 681, "unique_artists": 84}, {"city": "Kladno", "country": "CZ", "num_exhibitions": 50, "total_paintings": 150, "unique_artists": 25}, {"city": "Krefeld", "country": "DE", "num_exhibitions": 1, "total_paintings": 1, "unique_artists": 1}, {"city": "Krom\u011b\u0159\u00ed\u017e", "country": "CZ", "num_exhibitions": 27, "total_paintings": 100, "unique_artists": 27}, {"city": "Leipzig", "country": "DE", "num_exhibitions": 535, "total_paintings": 847, "unique_artists": 268}, {"city": "Liverpool", "country": "GB", "num_exhibitions": 49, "total_paintings": 157, "unique_artists": 49}, {"city": "London", "country": "GB", "num_exhibitions": 6308, "total_paintings": 20284, "unique_artists": 1927}, {"city": "Luzern", "country": "CH", "num_exhibitions": 14, "total_paintings": 59, "unique_artists": 14}, {"city": "Magdeburg", "country": "DE", "num_exhibitions": 1, "total_paintings": 5, "unique_artists": 1}, {"city": "Mannheim", "country": "DE", "num_exhibitions": 479, "total_paintings": 962, "unique_artists": 438}, {"city": "Milan", "country": "IT", "num_exhibitions": 791, "total_paintings": 2224, "unique_artists": 751}, {"city": "Moscow", "country": "RU", "num_exhibitions": 1202, "total_paintings": 8303, "unique_artists": 555}, {"city": "Munich", "country": "DE", "num_exhibitions": 8073, "total_paintings": 19355, "unique_artists": 2017}, {"city": "Naples", "country": "IT", "num_exhibitions": 6, "total_paintings": 87, "unique_artists": 6}, {"city": "New York", "country": "US", "num_exhibitions": 799, "total_paintings": 3199, "unique_artists": 350}, {"city": "Nijmegen", "country": "NL", "num_exhibitions": 44, "total_paintings": 122, "unique_artists": 44}, {"city": "Odessa", "country": "UA", "num_exhibitions": 55, "total_paintings": 419, "unique_artists": 55}, {"city": "Olomouc", "country": "CZ", "num_exhibitions": 36, "total_paintings": 144, "unique_artists": 36}, {"city": "Ostend", "country": "BE", "num_exhibitions": 96, "total_paintings": 364, "unique_artists": 48}, {"city": "Paris", "country": "FR", "num_exhibitions": 4578, "total_paintings": 21806, "unique_artists": 1531}, {"city": "Pittsburgh", "country": "US", "num_exhibitions": 1229, "total_paintings": 1656, "unique_artists": 575}, {"city": "Prague", "country": "CZ", "num_exhibitions": 1781, "total_paintings": 9472, "unique_artists": 482}, {"city": "Prost\u011bjov", "country": "CZ", "num_exhibitions": 2, "total_paintings": 194, "unique_artists": 1}, {"city": "Riga", "country": "LV", "num_exhibitions": 30, "total_paintings": 213, "unique_artists": 30}, {"city": "Rome", "country": "IT", "num_exhibitions": 798, "total_paintings": 2012, "unique_artists": 576}, {"city": "Rotterdam", "country": "NL", "num_exhibitions": 11, "total_paintings": 381, "unique_artists": 10}, {"city": "Rouen", "country": "FR", "num_exhibitions": 93, "total_paintings": 346, "unique_artists": 51}, {"city": "Saint Petersburg", "country": "RU", "num_exhibitions": 1001, "total_paintings": 6895, "unique_artists": 607}, {"city": "San Francisco", "country": "US", "num_exhibitions": 1, "total_paintings": 1, "unique_artists": 1}, {"city": "Stockholm", "country": "SE", "num_exhibitions": 95, "total_paintings": 619, "unique_artists": 25}, {"city": "Strasbourg", "country": "FR", "num_exhibitions": 194, "total_paintings": 504, "unique_artists": 97}, {"city": "Stuttgart", "country": "DE", "num_exhibitions": 196, "total_paintings": 456, "unique_artists": 98}, {"city": "Tokyo", "country": "JP", "num_exhibitions": 25, "total_paintings": 69, "unique_artists": 25}, {"city": "Toulouse", "country": "FR", "num_exhibitions": 356, "total_paintings": 2337, "unique_artists": 66}, {"city": "Unknown City", "country": "GB", "num_exhibitions": 237, "total_paintings": 494, "unique_artists": 237}, {"city": "Utrecht", "country": "NL", "num_exhibitions": 2, "total_paintings": 118, "unique_artists": 1}, {"city": "Vala\u0161sk\u00e9 Mezi\u0159\u00ed\u010d\u00ed", "country": "CZ", "num_exhibitions": 28, "total_paintings": 127, "unique_artists": 28}, {"city": "Venice", "country": "IT", "num_exhibitions": 5040, "total_paintings": 14982, "unique_artists": 1445}, {"city": "Vienna", "country": "AT", "num_exhibitions": 4592, "total_paintings": 21002, "unique_artists": 1116}, {"city": "Vilnius", "country": "LT", "num_exhibitions": 17, "total_paintings": 153, "unique_artists": 17}, {"city": "Weggis", "country": "CH", "num_exhibitions": 41, "total_paintings": 204, "unique_artists": 28}, {"city": "Weimar", "country": "DE", "num_exhibitions": 153, "total_paintings": 309, "unique_artists": 150}, {"city": "Zurich", "country": "CH", "num_exhibitions": 232, "total_paintings": 912, "unique_artists": 163}]}, {"name": "data_1", "source": "source_0", "transform": [{"type": "filter", "expr": "!length(data(\"param_8_store\")) || vlSelectionTest(\"param_8_store\", datum)"}, {"type": "project", "fields": ["city", "country", "num_exhibitions", "total_paintings", "unique_artists"]}]}, {"name": "data_2", "source": "data_1", "transform": [{"type": "stack", "field": "unique_artists", "groupby": ["city"], "sort": {"field": ["country"], "order": ["descending"]}, "as": ["unique_artists_start", "unique_artists_end"], "offset": "zero"}, {"type": "filter", "expr": "isValid(datum[\"unique_artists\"]) && isFinite(+datum[\"unique_artists\"])"}, {"type": "project", "fields": ["city", "country", "num_exhibitions", "total_paintings", "unique_artists", "unique_artists_end", "unique_artists_start"]}]}, {"name": "data_0_color_domain_country_0", "values": [{"country": "DE"}, {"country": "Unknown Country"}, {"country": "NL"}, {"country": "BE"}, {"country": "ES"}, {"country": "CH"}, {"country": "US"}, {"country": "PL"}, {"country": "GB"}, {"country": "HU"}, {"country": "NO"}, {"country": "CZ"}, {"country": "RU"}, {"country": "IT"}, {"country": "SE"}, {"country": "UA"}, {"country": "FR"}, {"country": "LV"}, {"country": "JP"}, {"country": "AT"}, {"country": "LT"}]}, {"name": "data_2_color_domain_country_1", "source": "data_2", "transform": [{"type": "aggregate", "groupby": ["country"], "fields": [], "ops": [], "as": []}, {"type": "formula", "expr": "datum['country']", "as": "sort_field"}, {"type": "project", "fields": ["country"]}]}, {"name": "data_0_size_domain_unique_artists", "values": [{"min": 1, "max": 2017}]}, {"name": "data_0_view_8_x_domain_num_exhibitions", "values": [{"min": 1, "max": 8073}]}, {"name": "data_0_view_8_y_domain_total_paintings", "values": [{"min": 1, "max": 22630}]}, {"name": "data_1_concat_1_x_domain_city", "source": "data_1", "transform": [{"type": "aggregate", "groupby": ["city"], "fields": ["unique_artists"], "ops": ["sum"], "as": ["sort_field"]}, {"type": "project", "fields": ["city", "sort_field"]}]}], "signals": [{"name": "childHeight", "value": 300}, {"name": "unit", "value": {}, "on": [{"events": "pointermove", "update": "isTuple(group()) ? group() : unit"}]}, {"name": "param_8", "update": "vlSelectionResolve(\"param_8_store\", \"union\")"}], "marks": [{"type": "group", "name": "view_8_group", "encode": {"update": {"height": {"signal": "childHeight"}, "width": {"signal": "width"}}}, "signals": [{"name": "param_8_x", "value": [], "on": [{"events": {"source": "scope", "filter": ["!event.item || event.item.mark.name !== \"param_8_brush\""], "type": "pointerdown"}, "update": "[x(unit), x(unit)]"}, {"events": {"source": "window", "between": [{"source": "scope", "filter": ["!event.item || event.item.mark.name !== \"param_8_brush\""], "type": "pointerdown"}, {"source": "window", "type": "pointerup"}], "consume": true, "type": "pointermove"}, "update": "[param_8_x[0], clamp(x(unit), 0, width)]"}, {"events": {"signal": "param_8_scale_trigger"}, "update": "[scale(\"view_8_x\", param_8_num_exhibitions[0]), scale(\"view_8_x\", param_8_num_exhibitions[1])]"}, {"events": [{"source": "view", "type": "dblclick"}], "update": "[0, 0]"}, {"events": {"signal": "param_8_translate_delta"}, "update": "clampRange(panLinear(param_8_translate_anchor.extent_x, param_8_translate_delta.x / span(param_8_translate_anchor.extent_x)), 0, width)"}, {"events": {"signal": "param_8_zoom_delta"}, "update": "clampRange(zoomLinear(param_8_x, param_8_zoom_anchor.x, param_8_zoom_delta), 0, width)"}]}, {"name": "param_8_num_exhibitions", "on": [{"events": {"signal": "param_8_x"}, "update": "param_8_x[0] === param_8_x[1] ? null : invert(\"view_8_x\", param_8_x)"}]}, {"name": "param_8_y", "value": [], "on": [{"events": {"source": "scope", "filter": ["!event.item || event.item.mark.name !== \"param_8_brush\""], "type": "pointerdown"}, "update": "[y(unit), y(unit)]"}, {"events": {"source": "window", "between": [{"source": "scope", "filter": ["!event.item || event.item.mark.name !== \"param_8_brush\""], "type": "pointerdown"}, {"source": "window", "type": "pointerup"}], "type": "pointermove", "consume": true}, "update": "[param_8_y[0], clamp(y(unit), 0, childHeight)]"}, {"events": {"signal": "param_8_scale_trigger"}, "update": "[scale(\"view_8_y\", param_8_total_paintings[0]), scale(\"view_8_y\", param_8_total_paintings[1])]"}, {"events": [{"source": "view", "type": "dblclick"}], "update": "[0, 0]"}, {"events": {"signal": "param_8_translate_delta"}, "update": "clampRange(panLinear(param_8_translate_anchor.extent_y, param_8_translate_delta.y / span(param_8_translate_anchor.extent_y)), 0, childHeight)"}, {"events": {"signal": "param_8_zoom_delta"}, "update": "clampRange(zoomLinear(param_8_y, param_8_zoom_anchor.y, param_8_zoom_delta), 0, childHeight)"}]}, {"name": "param_8_total_paintings", "on": [{"events": {"signal": "param_8_y"}, "update": "param_8_y[0] === param_8_y[1] ? null : invert(\"view_8_y\", param_8_y)"}]}, {"name": "param_8_scale_trigger", "value": {}, "on": [{"events": [{"scale": "view_8_x"}, {"scale": "view_8_y"}], "update": "(!isArray(param_8_num_exhibitions) || (+invert(\"view_8_x\", param_8_x)[0] === +param_8_num_exhibitions[0] && +invert(\"view_8_x\", param_8_x)[1] === +param_8_num_exhibitions[1])) && (!isArray(param_8_total_paintings) || (+invert(\"view_8_y\", param_8_y)[0] === +param_8_total_paintings[0] && +invert(\"view_8_y\", param_8_y)[1] === +param_8_total_paintings[1])) ? param_8_scale_trigger : {}"}]}, {"name": "param_8_tuple", "on": [{"events": [{"signal": "param_8_num_exhibitions || param_8_total_paintings"}], "update": "param_8_num_exhibitions && param_8_total_paintings ? {unit: \"view_8\", fields: param_8_tuple_fields, values: [param_8_num_exhibitions,param_8_total_paintings]} : null"}]}, {"name": "param_8_tuple_fields", "value": [{"field": "num_exhibitions", "channel": "x", "type": "R"}, {"field": "total_paintings", "channel": "y", "type": "R"}]}, {"name": "param_8_translate_anchor", "value": {}, "on": [{"events": [{"source": "scope", "markname": "param_8_brush", "type": "pointerdown"}], "update": "{x: x(unit), y: y(unit), extent_x: slice(param_8_x), extent_y: slice(param_8_y)}"}]}, {"name": "param_8_translate_delta", "value": {}, "on": [{"events": [{"source": "window", "between": [{"source": "scope", "markname": "param_8_brush", "type": "pointerdown"}, {"source": "window", "type": "pointerup"}], "consume": true, "type": "pointermove"}], "update": "{x: param_8_translate_anchor.x - x(unit), y: param_8_translate_anchor.y - y(unit)}"}]}, {"name": "param_8_zoom_anchor", "on": [{"events": [{"source": "scope", "markname": "param_8_brush", "consume": true, "type": "wheel"}], "update": "{x: x(unit), y: y(unit)}"}]}, {"name": "param_8_zoom_delta", "on": [{"events": [{"source": "scope", "markname": "param_8_brush", "type": "wheel", "consume": true}], "update": "pow(1.001, event.deltaY * pow(16, event.deltaMode))", "force": true}]}, {"name": "param_8_modify", "on": [{"events": {"signal": "param_8_tuple"}, "update": "modify(\"param_8_store\", param_8_tuple, true)"}]}], "marks": [{"type": "rect", "name": "param_8_brush_bg", "encode": {"enter": {"fill": {"value": "#333"}, "fillOpacity": {"value": 0.125}}, "update": {"y": [{"signal": "param_8_y[0]", "test": "data(\"param_8_store\").length && data(\"param_8_store\")[0].unit === \"view_8\""}, {"value": 0}], "x": [{"signal": "param_8_x[0]", "test": "data(\"param_8_store\").length && data(\"param_8_store\")[0].unit === \"view_8\""}, {"value": 0}], "x2": [{"signal": "param_8_x[1]", "test": "data(\"param_8_store\").length && data(\"param_8_store\")[0].unit === \"view_8\""}, {"value": 0}], "y2": [{"signal": "param_8_y[1]", "test": "data(\"param_8_store\").length && data(\"param_8_store\")[0].unit === \"view_8\""}, {"value": 0}]}}, "clip": true}, {"type": "symbol", "name": "view_8_marks", "from": {"data": "data_0"}, "encode": {"update": {"x": {"field": "num_exhibitions", "scale": "view_8_x"}, "shape": {"value": "circle"}, "y": {"field": "total_paintings", "scale": "view_8_y"}, "fill": [{"field": "country", "scale": "color", "test": "!length(data(\"param_8_store\")) || vlSelectionTest(\"param_8_store\", datum)"}, {"value": "lightgray"}], "size": {"field": "unique_artists", "scale": "size"}, "tooltip": {"signal": "{\"City\": isValid(datum[\"city\"]) ? datum[\"city\"] : \"\"+datum[\"city\"], \"Country\": isValid(datum[\"country\"]) ? datum[\"country\"] : \"\"+datum[\"country\"], \"Number of Exhibitions\": format(datum[\"num_exhibitions\"], \"\"), \"Total Paintings\": format(datum[\"total_paintings\"], \"\"), \"Number of Artists\": format(datum[\"unique_artists\"], \"\")}"}, "opacity": {"value": 0.7}}}, "style": ["circle"], "interactive": true}, {"type": "rect", "name": "param_8_brush", "encode": {"update": {"stroke": [{"value": "white", "test": "param_8_x[0] !== param_8_x[1] && param_8_y[0] !== param_8_y[1]"}, {}], "y2": [{"signal": "param_8_y[1]", "test": "data(\"param_8_store\").length && data(\"param_8_store\")[0].unit === \"view_8\""}, {"value": 0}], "x2": [{"signal": "param_8_x[1]", "test": "data(\"param_8_store\").length && data(\"param_8_store\")[0].unit === \"view_8\""}, {"value": 0}], "x": [{"signal": "param_8_x[0]", "test": "data(\"param_8_store\").length && data(\"param_8_store\")[0].unit === \"view_8\""}, {"value": 0}], "y": [{"signal": "param_8_y[0]", "test": "data(\"param_8_store\").length && data(\"param_8_store\")[0].unit === \"view_8\""}, {"value": 0}]}, "enter": {"cursor": {"value": "move"}, "fill": {"value": "transparent"}}}, "clip": true}], "axes": [{"scale": "view_8_x", "minExtent": 0, "ticks": false, "zindex": 0, "orient": "bottom", "aria": false, "maxExtent": 0, "labels": false, "grid": true, "gridScale": "view_8_y", "tickCount": {"signal": "ceil(width/40)"}, "domain": false}, {"scale": "view_8_y", "labels": false, "maxExtent": 0, "tickCount": {"signal": "ceil(childHeight/40)"}, "ticks": false, "domain": false, "gridScale": "view_8_x", "orient": "left", "minExtent": 0, "grid": true, "zindex": 0, "aria": false}, {"scale": "view_8_x", "tickCount": {"signal": "ceil(width/40)"}, "zindex": 0, "title": "Number of Exhibitions", "labelFlush": true, "orient": "bottom", "labelOverlap": true, "grid": false}, {"scale": "view_8_y", "zindex": 0, "grid": false, "orient": "left", "labelOverlap": true, "tickCount": {"signal": "ceil(childHeight/40)"}, "title": "Total Paintings"}], "title": {"text": "Exhibition Distribution", "anchor": "middle", "frame": "group"}, "style": "cell"}, {"type": "group", "name": "concat_1_group", "encode": {"update": {"width": {"signal": "width"}, "height": {"signal": "childHeight"}}}, "marks": [{"type": "rect", "name": "concat_1_marks", "from": {"data": "data_2"}, "encode": {"update": {"x": {"field": "city", "scale": "concat_1_x"}, "y2": {"field": "unique_artists_start", "scale": "concat_1_y"}, "y": {"field": "unique_artists_end", "scale": "concat_1_y"}, "fill": [{"field": "country", "scale": "color", "test": "!length(data(\"param_8_store\")) || vlSelectionTest(\"param_8_store\", datum)"}, {"value": "lightgray"}], "tooltip": {"signal": "{\"City\": isValid(datum[\"city\"]) ? datum[\"city\"] : \"\"+datum[\"city\"], \"Country\": isValid(datum[\"country\"]) ? datum[\"country\"] : \"\"+datum[\"country\"], \"Number of Artists\": format(datum[\"unique_artists\"], \"\")}"}, "width": {"signal": "max(0.25, bandwidth('concat_1_x'))"}}}, "style": ["bar"], "interactive": true}], "axes": [{"scale": "concat_1_y", "tickCount": {"signal": "ceil(childHeight/40)"}, "minExtent": 0, "grid": true, "zindex": 0, "domain": false, "gridScale": "concat_1_x", "orient": "left", "labels": false, "aria": false, "ticks": false, "maxExtent": 0}, {"scale": "concat_1_x", "orient": "bottom", "grid": false, "labelBaseline": "middle", "labelAlign": "right", "zindex": 0, "labelAngle": 270, "title": "City"}, {"scale": "concat_1_y", "tickCount": {"signal": "ceil(childHeight/40)"}, "labelOverlap": true, "grid": false, "orient": "left", "title": "Number of Artists", "zindex": 0}], "title": {"text": "Artists by City (Filtered)", "anchor": "middle", "frame": "group"}, "style": "cell"}], "scales": [{"name": "color", "type": "ordinal", "domain": {"fields": [{"data": "data_0_color_domain_country_0", "field": "country"}, {"data": "data_2_color_domain_country_1", "field": "country"}], "sort": true}, "range": "category"}, {"name": "size", "type": "linear", "domain": [{"signal": "(data(\"data_0_size_domain_unique_artists\")[0] || {}).min"}, {"signal": "(data(\"data_0_size_domain_unique_artists\")[0] || {}).max"}], "range": [100, 1000], "zero": true}, {"name": "view_8_x", "type": "linear", "domain": [{"signal": "(data(\"data_0_view_8_x_domain_num_exhibitions\")[0] || {}).min"}, {"signal": "(data(\"data_0_view_8_x_domain_num_exhibitions\")[0] || {}).max"}], "range": [0, {"signal": "width"}], "nice": true, "zero": true}, {"name": "view_8_y", "type": "linear", "domain": [{"signal": "(data(\"data_0_view_8_y_domain_total_paintings\")[0] || {}).min"}, {"signal": "(data(\"data_0_view_8_y_domain_total_paintings\")[0] || {}).max"}], "range": [{"signal": "childHeight"}, 0], "zero": true, "nice": true}, {"name": "concat_1_x", "type": "band", "domain": {"data": "data_1_concat_1_x_domain_city", "field": "city", "sort": {"op": "max", "field": "sort_field", "order": "descending"}}, "range": [0, {"signal": "width"}], "paddingInner": 0.1, "paddingOuter": 0.05}, {"name": "concat_1_y", "type": "linear", "domain": {"data": "data_2", "fields": ["unique_artists_start", "unique_artists_end"]}, "range": [{"signal": "childHeight"}, 0], "nice": true, "zero": true}], "legends": [{"fill": "color", "symbolType": "circle", "title": "country", "encode": {"symbols": {"update": {"opacity": {"value": 0.7}}}}}, {"title": "Number of Unique Artists", "size": "size", "symbolType": "circle", "encode": {"symbols": {"update": {"fill": {"value": "lightgray"}, "opacity": {"value": 0.7}, "stroke": {"value": "transparent"}}}}}], "config": {"style": {"cell": {"stroke": null}, "group-title": {"fontSize": 16}}}, "padding": 5, "background": "white", "width": 600, "layout": {"padding": 20, "columns": 1, "bounds": "full", "align": "each"}};
      var embedOpt = {"mode": "vega"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>